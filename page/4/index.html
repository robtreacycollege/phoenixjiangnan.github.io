<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Bowen's blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="keep learning - learning notes and blogs">
<meta property="og:type" content="website">
<meta property="og:title" content="Bowen's blog">
<meta property="og:url" content="https://phoenixjiangnan.github.io/page/4/index.html">
<meta property="og:site_name" content="Bowen's blog">
<meta property="og:description" content="keep learning - learning notes and blogs">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Bowen's blog">
<meta name="twitter:description" content="keep learning - learning notes and blogs">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="https://phoenixjiangnan.github.io/page/4/"/>

  <title> Bowen's blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Bowen's blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">keep learning - learning notes and blogs</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/15/best practices/design pattern/Design-Pattern-Singleton/" itemprop="url">
                  Design Pattern - Singleton
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-15T11:38:38+08:00" content="2016-04-15">
              2016-04-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/" itemprop="url" rel="index">
                    <span itemprop="name">best practice</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/15/best practices/design pattern/Design-Pattern-Singleton/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/15/best practices/design pattern/Design-Pattern-Singleton/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##Eager Initialization</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton s = <span class="keyword">new</span> Singleton();</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> s;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>##Lazy Initialization</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Thread-safe version</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton s = <span class="keyword">null</span>;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">    </div><div class="line">    <span class="comment">// For thread-safty purpose</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(s == <span class="keyword">null</span>)</div><div class="line">            s = <span class="keyword">new</span> Singleton();</div><div class="line">        <span class="keyword">return</span> s;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Use-“double-checked-locking”-to-reduce-the-use-of-synchronization-in-getInstance"><a href="#Use-“double-checked-locking”-to-reduce-the-use-of-synchronization-in-getInstance" class="headerlink" title="Use “double-checked locking” to reduce the use of synchronization in getInstance()"></a>Use “double-checked locking” to reduce the use of synchronization in getInstance()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Thread-safe version</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton s = <span class="keyword">null</span>;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(s == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">synchronized</span>(Singleton.class) &#123;</div><div class="line">                <span class="keyword">if</span>(s == <span class="keyword">null</span>) &#123;</div><div class="line">                    s = <span class="keyword">new</span> Singleton();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> s;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/14/best practices/design pattern/Design-Pattern-Adapter-Pattern/" itemprop="url">
                  Design Pattern - Adapter Pattern
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-14T15:27:29+08:00" content="2016-04-14">
              2016-04-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/" itemprop="url" rel="index">
                    <span itemprop="name">best practice</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/14/best practices/design pattern/Design-Pattern-Adapter-Pattern/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/14/best practices/design pattern/Design-Pattern-Adapter-Pattern/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><code>Adapter Pattern</code> is a software design pattern that <code>allows the interface of an existing class to be used from another interface</code>. It is often used to make existing classes work with others without modifying their source code.</p>
<p>An adapter helps two incompatible interfaces to work together. Adapter pattern works as a bridge between two incompatible interfaces. This is the real world definition for an adapter. Interfaces may be incompatible but the inner functionality should suit the need. The Adapter design pattern allows otherwise incompatible classes to work together by converting the interface of one class into an interface expected by the clients.</p>
<p>This pattern involves a single class which is responsible to join functionalities of independent or incompatible interfaces. A real life example could be a case of card reader which acts as an adapter between memory card and a laptop. You plugin the memory card into card reader and card reader into the laptop so that memory card can be read via laptop.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MediaPlayer</span> </span>&#123;</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">(String audioType, String fileName)</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AdvancedMediaPlayer</span> </span>&#123;	</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">playVlc</span><span class="params">(String fileName)</span></span>;</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">playMp4</span><span class="params">(String fileName)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VlcPlayer</span> <span class="keyword">implements</span> <span class="title">AdvancedMediaPlayer</span></span>&#123;</div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">playVlc</span><span class="params">(String fileName)</span> </span>&#123;</div><div class="line">      System.out.println(<span class="string">"Playing vlc file. Name: "</span>+ fileName);		</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">playMp4</span><span class="params">(String fileName)</span> </span>&#123;</div><div class="line">      <span class="comment">//do nothing</span></div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mp4Player</span> <span class="keyword">implements</span> <span class="title">AdvancedMediaPlayer</span></span>&#123;</div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">playVlc</span><span class="params">(String fileName)</span> </span>&#123;</div><div class="line">      <span class="comment">//do nothing</span></div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">playMp4</span><span class="params">(String fileName)</span> </span>&#123;</div><div class="line">      System.out.println(<span class="string">"Playing mp4 file. Name: "</span>+ fileName);		</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> PlayerType &#123;</div><div class="line">    Vlc(<span class="string">"vlc"</span>), Mp4(<span class="string">"mp4"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MediaAdapter</span> <span class="keyword">implements</span> <span class="title">MediaPlayer</span> </span>&#123;</div><div class="line">   AdvancedMediaPlayer advancedMusicPlayer;</div><div class="line"></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="title">MediaAdapter</span><span class="params">(PlayerType audioType)</span></span>&#123;</div><div class="line">      <span class="keyword">if</span>(audioType == PlayerType.Vlc)&#123;</div><div class="line">         advancedMusicPlayer = <span class="keyword">new</span> VlcPlayer();			</div><div class="line">      &#125;<span class="keyword">else</span> <span class="keyword">if</span> (audioType == PlayerType.mp4))&#123;</div><div class="line">         advancedMusicPlayer = <span class="keyword">new</span> Mp4Player();</div><div class="line">      &#125;	</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">(String audioType, String fileName)</span> </span>&#123;</div><div class="line">      <span class="keyword">if</span>(audioType == PlayerType.Vlc)&#123;</div><div class="line">         advancedMusicPlayer.playVlc(fileName);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span>(audioType == PlayerType.mp4)&#123;</div><div class="line">         advancedMusicPlayer.playMp4(fileName);</div><div class="line">      &#125;</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AudioPlayer</span> <span class="keyword">implements</span> <span class="title">MediaPlayer</span> </span>&#123;</div><div class="line">   MediaAdapter mediaAdapter; </div><div class="line"></div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">(StringPlayerType audioType, String fileName)</span> </span>&#123;</div><div class="line">      <span class="comment">//inbuilt support to play mp3 music files</span></div><div class="line">      <span class="keyword">if</span>(audioType == PlayerType.Mp3)&#123;</div><div class="line">         System.out.println(<span class="string">"Playing mp3 file. Name: "</span> + fileName);			</div><div class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span>(audioType == PlayerType.Vlc || audioType == PlayerType.Mp4)&#123;</div><div class="line">         <span class="comment">//mediaAdapter is providing support to play other file formats</span></div><div class="line">         mediaAdapter = <span class="keyword">new</span> MediaAdapter(audioType);</div><div class="line">         mediaAdapter.play(audioType, fileName);</div><div class="line">      &#125; <span class="keyword">else</span>&#123;</div><div class="line">         System.out.println(<span class="string">"Invalid media. "</span> + audioType + <span class="string">" format not supported"</span>);</div><div class="line">      &#125;</div><div class="line">   &#125;   </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdapterPatternDemo</span> </span>&#123;</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">      AudioPlayer audioPlayer = <span class="keyword">new</span> AudioPlayer();</div><div class="line"></div><div class="line">      audioPlayer.play(<span class="string">"mp3"</span>, <span class="string">"beyond the horizon.mp3"</span>);</div><div class="line">      audioPlayer.play(<span class="string">"mp4"</span>, <span class="string">"alone.mp4"</span>);</div><div class="line">      audioPlayer.play(<span class="string">"vlc"</span>, <span class="string">"far far away.vlc"</span>);</div><div class="line">      audioPlayer.play(<span class="string">"avi"</span>, <span class="string">"mind me.avi"</span>);</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/14/best practices/design pattern/Design-Pattern-Decorator-Pattern/" itemprop="url">
                  Design Pattern - Decorator Pattern
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-14T15:08:14+08:00" content="2016-04-14">
              2016-04-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/" itemprop="url" rel="index">
                    <span itemprop="name">best practice</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/14/best practices/design pattern/Design-Pattern-Decorator-Pattern/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/14/best practices/design pattern/Design-Pattern-Decorator-Pattern/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><code>Decorator Pattern</code> is used to add additional features or behaviors to a particular instance of a class, while not modifying the other instances of same class.</li>
<li>Decorators provide a flexible alternative to sub-classing for extending functionality. </li>
<li>Please note that the description above implies that decorating an object changes its behavior but not its interface.</li>
<li>This pattern is designed so that multiple decorators can be stacked on top of each other, each time adding a new functionality to the overridden method(s).</li>
</ul>
<h2 id="A-typical-diagram-of-decorator-pattern-looks-like-this"><a href="#A-typical-diagram-of-decorator-pattern-looks-like-this" class="headerlink" title="A typical diagram of decorator pattern looks like this."></a>A typical diagram of decorator pattern looks like this.</h2><p><img src="http://howtodoinjava.com/wp-content/uploads/decorator-design-pattern-participants.png" alt="decorator pattern"></p>
<p>This wrapping could be achieved by the following sequence of steps:</p>
<ol>
<li>Subclass the original “Component” class into a “Decorator” class (see UML diagram);</li>
<li>In the Decorator class, add a Component pointer as a field;</li>
<li>Pass a Component to the Decorator constructor to initialize the Component pointer;</li>
<li>In the Decorator class, redirect all “Component” methods to the “Component” pointer; and</li>
<li>In the ConcreteDecorator class, override any Component method(s) whose behavior needs to be modified.</li>
</ol>
<ul>
<li>Component - this is the wrapper which can have additional responsibilities associated with it at runtime.</li>
<li>ConcreteComponent - is the original object to which the additional responsibilities are added in program.</li>
<li>Decorator - this is an abstract class which contains a reference to the component object and also implements the component interface.</li>
<li>ConcreteDecorator - they extend the decorator and builds additional functionality on top of the Component class.</li>
</ul>
<blockquote>
<p>You have an instance, and you put another instance inside of it. They<br>both support the same (or similar) interfaces. The one on the outside<br>is a “decorator.” You use the one on the outside. It either masks,<br>changes, or pass-troughs the methods of the instance inside of it.</p>
</blockquote>
<h3 id="1-Difference-between-decorator-pattern-and-Adapter-pattern"><a href="#1-Difference-between-decorator-pattern-and-Adapter-pattern" class="headerlink" title="1 Difference between decorator pattern and Adapter pattern"></a>1 Difference between decorator pattern and Adapter pattern</h3><ul>
<li>Adapter Pattern is used to convert the interface of an object into something else. </li>
<li>Decorator Pattern is used to extend the functionality of an object while maintaining its interface. </li>
</ul>
<p>Both of these are probably sometimes called Wrapper Pattern since both of them do “wrap” an object.</p>
<h3 id="2-Difference-between-a-DecoratorPattern-and-Subclassing"><a href="#2-Difference-between-a-DecoratorPattern-and-Subclassing" class="headerlink" title="2 Difference between a DecoratorPattern and Subclassing"></a>2 Difference between a DecoratorPattern and Subclassing</h3><ul>
<li>In subclassing you can decorate any class that implements an interface “with a single class”. Say I wanted to give myself a java.util.Map that printed a message whenever I added or removed a key. If I only ever actually used java.util.HashMap I could just create PrintingMap? as a subclass of HashMap and override put &amp; remove. But if I want to create a printing version of TreeMap then I either create PrintingTreeMap? (which has almost identical code to PrintingMap?</li>
</ul>
<h2 id="Common-usage-of-decorator-pattern"><a href="#Common-usage-of-decorator-pattern" class="headerlink" title="Common usage of decorator pattern:"></a>Common usage of decorator pattern:</h2><p>Java iO library classes e.g. BufferedInputStream bs = new BufferedInputStream(new FileInputStream(new File(“File1.txt”)));</p>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>The following Java example illustrates the use of decorators using the window/scrolling scenario.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// The Window interface class</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Window</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>; <span class="comment">// Draws the Window</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDescription</span><span class="params">()</span></span>; <span class="comment">// Returns a description of the Window</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Extension of a simple Window without any scrollbars</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleWindow</span> <span class="keyword">implements</span> <span class="title">Window</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// Draw window</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"simple window"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The following classes contain the decorators for all Window classes, including the decorator classes themselves.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// abstract decorator class - note that it implements Window</span></div><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">WindowDecorator</span> <span class="keyword">implements</span> <span class="title">Window</span> </span>&#123;</div><div class="line">    <span class="keyword">protected</span> Window windowToBeDecorated; <span class="comment">// the Window being decorated</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WindowDecorator</span> <span class="params">(Window windowToBeDecorated)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.windowToBeDecorated = windowToBeDecorated;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</div><div class="line">        windowToBeDecorated.draw(); <span class="comment">//Delegation</span></div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> windowToBeDecorated.getDescription(); <span class="comment">//Delegation</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// The first concrete decorator which adds vertical scrollbar functionality</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">VerticalScrollBarDecorator</span> <span class="keyword">extends</span> <span class="title">WindowDecorator</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">VerticalScrollBarDecorator</span> <span class="params">(Window windowToBeDecorated)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(windowToBeDecorated);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.draw();</div><div class="line">        drawVerticalScrollBar();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getDescription() + <span class="string">", including vertical scrollbars"</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">drawVerticalScrollBar</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// Draw the vertical scrollbar</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// The second concrete decorator which adds horizontal scrollbar functionality</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HorizontalScrollBarDecorator</span> <span class="keyword">extends</span> <span class="title">WindowDecorator</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HorizontalScrollBarDecorator</span> <span class="params">(Window windowToBeDecorated)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(windowToBeDecorated);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.draw();</div><div class="line">        drawHorizontalScrollBar();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getDescription() + <span class="string">", including horizontal scrollbars"</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">drawHorizontalScrollBar</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// Draw the horizontal scrollbar</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Here’s a test program that creates a Window instance which is fully decorated (i.e., with vertical and horizontal scrollbars), and prints its description:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DecoratedWindowTest</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="comment">// Create a decorated Window with horizontal and vertical scrollbars</span></div><div class="line">        Window decoratedWindow = <span class="keyword">new</span> HorizontalScrollBarDecorator (</div><div class="line">                <span class="keyword">new</span> VerticalScrollBarDecorator (<span class="keyword">new</span> SimpleWindow()));</div><div class="line"></div><div class="line">        <span class="comment">// Print the Window's description</span></div><div class="line">        System.out.println(decoratedWindow.getDescription());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Below is the JUnit test class for the Test Driven Development</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WindowDecoratorTest</span> </span>&#123;</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testWindowDecoratorTest</span><span class="params">()</span> </span>&#123;</div><div class="line">		Window decoratedWindow = <span class="keyword">new</span> HorizontalScrollBarDecorator(<span class="keyword">new</span> VerticalScrollbarDecorator(<span class="keyword">new</span> SimpleWindow()));</div><div class="line">		</div><div class="line">        System.out.println(decoratedWindow.getDescription());</div><div class="line">        <span class="comment">// "simple window, including vertical scrollbars, including horizontal scrollbars"</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/14/best practices/design pattern/Design-Pattern-Proxy-Pattern/" itemprop="url">
                  Design Pattern - Proxy Pattern
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-14T15:03:24+08:00" content="2016-04-14">
              2016-04-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/" itemprop="url" rel="index">
                    <span itemprop="name">best practice</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/14/best practices/design pattern/Design-Pattern-Proxy-Pattern/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/14/best practices/design pattern/Design-Pattern-Proxy-Pattern/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>In proxy pattern, a class represents functionality of another class. This type of design pattern comes under structural pattern.</p>
<p>In proxy pattern, we create object having original object to interface its functionality to outer world.</p>
<p>The following Java example illustrates the “virtual proxy” pattern. The <code>ProxyImage</code> class is used to access a remote method.</p>
<p>The example creates first an interface against which the pattern creates the classes. This interface contains only one method to display the image, called <code>displayImage()</code>, that has to be coded by all classes implementing it.</p>
<p>The proxy class <code>ProxyImage</code> is running on another system than the real image class itself and can represent the real image <code>RealImage</code> over there. The image information is accessed from the disk. Using the proxy pattern, the code of the <code>ProxyImage</code> avoids multiple loading of the image, accessing it from the other system in a memory-saving manner. </p>
<blockquote>
<p>It should be noted, however, that the lazy loading demonstrated in this example is not part of the proxy pattern, but is merely an advantage made possible by the use of the proxy.</p>
</blockquote>
<h1 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Image</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">displayImage</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>Notice that both RealImage and ProxyImage implement the same interface</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//on System A, the real system that handles data</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RealImage</span> <span class="keyword">implements</span> <span class="title">Image</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> String filename = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RealImage</span><span class="params">(<span class="keyword">final</span> String filename)</span> </span>&#123; </div><div class="line">        <span class="keyword">this</span>.filename = filename;</div><div class="line">        loadImageFromDisk();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">loadImageFromDisk</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Loading   "</span> + filename);</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">// The same method</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">displayImage</span><span class="params">()</span> </span>&#123; </div><div class="line">        System.out.println(<span class="string">"Displaying "</span> + filename); </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//on System B, a remote proxy/system used to access data remotely </span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxyImage</span> <span class="keyword">implements</span> <span class="title">Image</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> RealImage image = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">private</span> String filename = <span class="keyword">null</span>;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxyImage</span><span class="params">(<span class="keyword">final</span> String filename)</span> </span>&#123; </div><div class="line">        <span class="keyword">this</span>.filename = filename; </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">// The same method</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">displayImage</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// Lazy loading, an advantage brought by Proxy Pattern</span></div><div class="line">        <span class="keyword">if</span> (image == <span class="keyword">null</span>) &#123;</div><div class="line">           image = <span class="keyword">new</span> RealImage(filename);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        image.displayImage();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxyExample</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="keyword">final</span> Image IMAGE1 = <span class="keyword">new</span> ProxyImage(<span class="string">"HiRes_10MB_Photo1"</span>);</div><div class="line">        <span class="keyword">final</span> Image IMAGE2 = <span class="keyword">new</span> ProxyImage(<span class="string">"HiRes_10MB_Photo2"</span>);</div><div class="line"> </div><div class="line">        IMAGE1.displayImage(); <span class="comment">// loading necessary</span></div><div class="line">        </div><div class="line">        IMAGE1.displayImage(); <span class="comment">// loading unnecessary</span></div><div class="line">        </div><div class="line">        IMAGE2.displayImage(); <span class="comment">// loading necessary</span></div><div class="line">        </div><div class="line">        IMAGE2.displayImage(); <span class="comment">// loading unnecessary</span></div><div class="line">        </div><div class="line">        IMAGE1.displayImage(); <span class="comment">// loading unnecessary</span></div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The program’s output is:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Loading   HiRes_10MB_Photo1</div><div class="line">Displaying HiRes_10MB_Photo1</div><div class="line"></div><div class="line">Displaying HiRes_10MB_Photo1</div><div class="line"></div><div class="line">Loading   HiRes_10MB_Photo2</div><div class="line">Displaying HiRes_10MB_Photo2</div><div class="line"></div><div class="line">Displaying HiRes_10MB_Photo2</div><div class="line"></div><div class="line">Displaying HiRes_10MB_Photo1</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/14/best practices/design pattern/Design-Pattern-Strategy-Pattern-Program-to-an-interface-not-an-implementation/" itemprop="url">
                  Design Pattern - Strategy Pattern - Program to an interface, not an implementation
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-14T14:58:10+08:00" content="2016-04-14">
              2016-04-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/" itemprop="url" rel="index">
                    <span itemprop="name">best practice</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/14/best practices/design pattern/Design-Pattern-Strategy-Pattern-Program-to-an-interface-not-an-implementation/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/14/best practices/design pattern/Design-Pattern-Strategy-Pattern-Program-to-an-interface-not-an-implementation/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Dependency-Inversion-Principles"><a href="#Dependency-Inversion-Principles" class="headerlink" title="Dependency Inversion Principles"></a>Dependency Inversion Principles</h2><ul>
<li>No variable should hold a reference to a concrete class</li>
<li>No class should derive from a concrete class</li>
<li>No method should override an implemented method of any of its base classes</li>
</ul>
<h2 id="Design-Principles"><a href="#Design-Principles" class="headerlink" title="Design Principles:"></a>Design Principles:</h2><pre><code>1. Identify the aspects of your application that vary and separate them from what stays the same
2. Program to an interface, not an implementation
</code></pre><p>The word <code>interface</code> is overloaded here. There’s the concept of interface, but there’s also the Java construct <code>interface</code>. You can <code>program to an interface</code>, without having to actually use a Java <code>interface</code>. The point is to exploit polymorphism by programming to a supertype so that the actual runtime object isn’t blocked into the code. </p>
<p>We could rephrase <code>program to a supertype</code> as </p>
<blockquote>
<p>the declared type of the variables should be a supertype, usually an<br><code>abstract class</code> or <code>interface</code>, so that the objects assigned to those<br>variables can be of any concrete implementation of the supertype,<br>which means the class declaring them doesn’t have to know about the<br>actual object types!</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">Animal</div><div class="line">-   makeSound()</div><div class="line"></div><div class="line">Dog</div><div class="line">-   makeSound() &#123;</div><div class="line">        bark();</div><div class="line">    &#125;</div><div class="line">-   bark() &#123;<span class="comment">//&#125;</span></div><div class="line"></div><div class="line">Cat</div><div class="line">-   makeSound() &#123;</div><div class="line">        meow();</div><div class="line">    &#125;</div><div class="line">-   meow() &#123;<span class="comment">//&#125;</span></div></pre></td></tr></table></figure>
<h3 id="Current-Design-version-1"><a href="#Current-Design-version-1" class="headerlink" title="Current Design - version 1"></a>Current Design - version 1</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Intefaces</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IFlyBehavior</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IQuackBehavior</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">quack</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Implementations</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FlyWithWings</span> <span class="keyword">implements</span> <span class="title">IFlyBehavior</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// fly with wings!</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FlyNoWya</span> <span class="keyword">implements</span> <span class="title">IFlyBahavior</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// do nothing</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Quack</span> <span class="keyword">implements</span> <span class="title">IQuackBehavior</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">quack</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// quack</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Squeak</span> <span class="keyword">implements</span> <span class="title">IQuackBehavior</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">quack</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// squeak</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MuteQuack</span> <span class="keyword">implements</span> <span class="title">IQuackBehavior</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">quack</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// do nothing</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Classes</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Duck</span> </span>&#123;</div><div class="line">    IFlyBehavior flyBehavior;</div><div class="line">    IQuackBehavior quackBahavior;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">performFly</span><span class="params">()</span> </span>&#123;</div><div class="line">        flyBahavior.fly();</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">performQuack</span><span class="params">()</span> </span>&#123;</div><div class="line">        quackBahavior.quack();</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">    * Strategy Pattern</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFlyBehavior</span><span class="params">(IFlyBehavior f)</span> </span>&#123;</div><div class="line">        flyBehavior = f;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setQuackBehavior</span><span class="params">(IQuackBehavior q)</span> </span>&#123;</div><div class="line">        quackBahavior = q;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MallardDuck</span> <span class="keyword">extends</span> <span class="title">Duck</span> </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Add-setXxx-method-to-apply-Strategy-Pattern"><a href="#Add-setXxx-method-to-apply-Strategy-Pattern" class="headerlink" title="Add setXxx() method to apply Strategy Pattern"></a>Add setXxx() method to apply Strategy Pattern</h3><p>the <code>strategy pattern</code> is a software design pattern that enables an algorithm’s behavior to be selected at runtime. The strategy pattern</p>
<ul>
<li>defines a family of algorithms,</li>
<li>encapsulates each algorithm, and</li>
<li>makes the algorithms interchangeable within that family.</li>
</ul>
<h2 id="Design-Principles-1"><a href="#Design-Principles-1" class="headerlink" title="Design Principles:"></a>Design Principles:</h2><pre><code>1. Favor composition over inheritance
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/14/best practices/design pattern/Design-Pattern-Command-Pattern/" itemprop="url">
                  Design Pattern - Command Pattern
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-14T14:53:28+08:00" content="2016-04-14">
              2016-04-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/" itemprop="url" rel="index">
                    <span itemprop="name">best practice</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/14/best practices/design pattern/Design-Pattern-Command-Pattern/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/14/best practices/design pattern/Design-Pattern-Command-Pattern/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>The goal of this pattern is to <code>encapsulate method invocation</code></p>
<ul>
<li>I.e., decouple the class that is invoking a method from the method itself</li>
<li>The invoker has no knowledge of what the invoked method does or how the method accomplishes its task</li>
</ul>
</li>
<li><p>This will allow a class to execute actions without knowing anything about them</p>
</li>
<li><p>Encapsulating method invocation will facilitate addition and removal of methods<br>from our handler</p>
</li>
<li><p>There are 4 types of objects involved:</p>
<ol>
<li><code>Command</code><br> – This encapsulates the method invocation<br> – We’ll use an interface from which all Commands inherit<br> – It contains a single method - execute - that carries out a particular task</li>
<li><code>Client</code><br> – Creates a command object for a given task</li>
<li><code>Invoker</code><br> – Commands are assigned to the Invoker by the Clients that create the Commands<br> – Receives requests for a task to be performed<br> – Carries out task by invoking the execute method of the Command</li>
<li><code>Receiver</code><br> – Object that actually carries out a task<br> – This is the object that knows all the steps required</li>
</ol>
</li>
</ul>
<h2 id="Uses"><a href="#Uses" class="headerlink" title="Uses"></a>Uses</h2><ul>
<li>GUI buttons and menu items </li>
<li>Parallel Processing</li>
<li>Thread pools</li>
</ul>
<h2 id="e-g"><a href="#e-g" class="headerlink" title="e.g"></a>e.g</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/** The Command interface */</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Command</span> </span>&#123;</div><div class="line">   <span class="function"><span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/** The Command for turning on the light - ConcreteCommand #1 */</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FlipUpCommand</span> <span class="keyword">implements</span> <span class="title">Command</span> </span>&#123;</div><div class="line">   <span class="keyword">private</span> Light theLight;</div><div class="line"></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="title">FlipUpCommand</span><span class="params">(Light light)</span> </span>&#123;</div><div class="line">      <span class="keyword">this</span>.theLight = light;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="meta">@Override</span>    <span class="comment">// Command</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span> </span>&#123;</div><div class="line">      theLight.turnOn();</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/** The Command for turning off the light - ConcreteCommand #2 */</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FlipDownCommand</span> <span class="keyword">implements</span> <span class="title">Command</span> </span>&#123;</div><div class="line">   <span class="keyword">private</span> Light theLight;</div><div class="line"></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="title">FlipDownCommand</span><span class="params">(Light light)</span> </span>&#123;</div><div class="line">      <span class="keyword">this</span>.theLight = light;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="meta">@Override</span>    <span class="comment">// Command</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span> </span>&#123;</div><div class="line">      theLight.turnOff();</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/** The Invoker class */</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Switch</span> </span>&#123;</div><div class="line">   <span class="keyword">private</span> List&lt;Command&gt; history = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">storeAndExecute</span><span class="params">(Command cmd)</span> </span>&#123;</div><div class="line">      <span class="keyword">this</span>.history.add(cmd); <span class="comment">// optional </span></div><div class="line">      cmd.execute();</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/** The Receiver class */</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Light</span> </span>&#123;</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">turnOn</span><span class="params">()</span> </span>&#123;</div><div class="line">      System.out.println(<span class="string">"The light is on"</span>);</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">turnOff</span><span class="params">()</span> </span>&#123;</div><div class="line">      System.out.println(<span class="string">"The light is off"</span>);</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* The test class or Client */</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PressSwitch</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        <span class="comment">// Receiver </span></div><div class="line">        Light lamp = <span class="keyword">new</span> Light();</div><div class="line">        </div><div class="line">        <span class="comment">// Command</span></div><div class="line">        Command switchUp = <span class="keyword">new</span> FlipUpCommand(lamp);</div><div class="line">        Command switchDown = <span class="keyword">new</span> FlipDownCommand(lamp);</div><div class="line">        </div><div class="line">        <span class="comment">// Invoker</span></div><div class="line">        Switch mySwitch = <span class="keyword">new</span> Switch();</div><div class="line"></div><div class="line">        <span class="keyword">switch</span>(args[<span class="number">0</span>]) &#123;</div><div class="line">            <span class="keyword">case</span> <span class="string">"ON"</span>:</div><div class="line">                mySwitch.storeAndExecute(switchUp);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="string">"OFF"</span>:</div><div class="line">                mySwitch.storeAndExecute(switchDown);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">default</span>:</div><div class="line">                System.err.println(<span class="string">"Argument \"ON\" or \"OFF\" is required."</span>);</div><div class="line">                System.exit(-<span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/14/best practices/design pattern/Design-Pattern-Observer-Pattern/" itemprop="url">
                  Design Pattern - Observer Pattern
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-14T14:53:28+08:00" content="2016-04-14">
              2016-04-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/" itemprop="url" rel="index">
                    <span itemprop="name">best practice</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/14/best practices/design pattern/Design-Pattern-Observer-Pattern/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/14/best practices/design pattern/Design-Pattern-Observer-Pattern/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Keeping-your-Objects-in-the-know-Observer-Pattern"><a href="#Keeping-your-Objects-in-the-know-Observer-Pattern" class="headerlink" title="Keeping your Objects in the know - Observer Pattern"></a>Keeping your Objects in the know - Observer Pattern</h1><blockquote>
<p>Publishers + Subscribers = Observer Pattern</p>
<p><code>Observer Pattern</code> defines a one-to-many dependency between objects so that when one object changes state, all of its dependents are notified and updated automatically.</p>
<p>The key idea is that your <code>Subject</code> will maintain a set of <code>Observers</code> who want to know events happening to <code>Subject</code>. <code>Subject</code> should notify and update all <code>Observers</code> after each observed action by calling <code>Observers&#39;</code> cooresponding methods</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">interface Subject              ---&gt;             interface Observer</div><div class="line">    - registerObserver()                            - update()</div><div class="line">    - removeObserver()</div><div class="line">    - notifyObserver()</div><div class="line">    </div><div class="line">        /\                                              /\</div><div class="line">         |                                               |</div><div class="line"></div><div class="line">ConcreateSubject                &lt;---            ConcreteObserver</div><div class="line">    - registerObserver() &#123;&#125;                         - update()</div><div class="line">    - removeObserver() &#123;&#125;                           - other Observer specific methods </div><div class="line">    - notifyObserver() &#123;&#125;</div><div class="line"></div><div class="line">    - getState()</div><div class="line">    - setState()</div></pre></td></tr></table></figure>
<p>E.g.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// interfaces</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Subject</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">registerObserver</span><span class="params">(Observer o)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer o)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">notifyObserver</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Observer</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">float</span> temp, <span class="keyword">float</span> humidity, <span class="keyword">float</span> pressure)</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DisplayElement</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Implementations</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherData</span> <span class="keyword">implements</span> <span class="title">Subject</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> List&lt;Observers&gt; observers;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> temperature;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> humidity;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> pressure;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WeatherData</span><span class="params">()</span> </span>&#123;</div><div class="line">        observers = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerObserver</span><span class="params">(Observer o)</span> </span>&#123;</div><div class="line">        observers.add(o);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer o)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> i = observers.indexOf(o);</div><div class="line">        <span class="keyword">if</span>(i &gt;= <span class="number">0</span>) &#123;</div><div class="line">            observers.remove(o);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObservers</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; observers.size(); i ++) &#123;</div><div class="line">            observers.get(i).update(temperature, humidity, pressure);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMeasurements</span><span class="params">(<span class="keyword">float</span> t, <span class="keyword">float</span> h, <span class="keyword">float</span> p)</span> </span>&#123;</div><div class="line">        temperature = t;</div><div class="line">        humidity = h;</div><div class="line">        pressure = p;</div><div class="line">        notifyObservers();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CurrentConditionsDisplay</span> <span class="keyword">implements</span> <span class="title">Observer</span>, <span class="title">DisplayElement</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> temperature;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> humidity;</div><div class="line">    <span class="keyword">private</span> Subject weatherData;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CurrentConditionDisplay</span><span class="params">(Subject w)</span> </span>&#123;</div><div class="line">        weatherData = w;</div><div class="line">        weatherData.registerObserver(<span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">float</span> t, <span class="keyword">float</span> h, <span class="keyword">float</span> p)</span> </span>&#123;</div><div class="line">        temperature = t;</div><div class="line">        humidity = h;</div><div class="line">        display();</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// ...</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherStation</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        WeatherData w = <span class="keyword">new</span> WeatherData();</div><div class="line">        </div><div class="line">        CurrentConditionDisplay c = <span class="keyword">new</span> CurrentConditionDisplay(w);</div><div class="line">        StatisticsDisplay s = <span class="keyword">new</span> StatisticsDisplay(w);</div><div class="line">        ForecastDisplay f = <span class="keyword">new</span> ForecastDisplay(w);</div><div class="line">        </div><div class="line">        w.serMeasurements(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</div><div class="line">        w.setMeasurements(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Java-built-in-Observer-Pattern"><a href="#Java-built-in-Observer-Pattern" class="headerlink" title="Java built-in Observer Pattern"></a>Java built-in Observer Pattern</h1>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/14/system design/cache/Cache-Design-a-cache-with-inspiration-from-Guava-Cache/" itemprop="url">
                  Cache - Design a cache with inspiration from Guava Cache
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-14T14:48:01+08:00" content="2016-04-14">
              2016-04-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/system-design/" itemprop="url" rel="index">
                    <span itemprop="name">system design</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/system-design/cache/" itemprop="url" rel="index">
                    <span itemprop="name">cache</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/14/system design/cache/Cache-Design-a-cache-with-inspiration-from-Guava-Cache/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/14/system design/cache/Cache-Design-a-cache-with-inspiration-from-Guava-Cache/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Cache-Design-Google-Guava"><a href="#Cache-Design-Google-Guava" class="headerlink" title="Cache Design - Google Guava"></a>Cache Design - Google Guava</h2><ol>
<li>Cache Heating<ul>
<li><code>Pre-loading</code> v.s. <code>Non-loading</code></li>
</ul>
</li>
<li>Concurrency<ul>
<li>Lock striping (a couple of locks for different key segments)</li>
<li>ReadWriteLock</li>
</ul>
</li>
<li>Weak keys<ul>
<li>What if the cache keys are transient objects (e.g. requests), which don’t belong in the cache if there are no other references elsewhere?</li>
<li>Allow the garbage collector to immediately collect cache keys when other references are gone</li>
</ul>
</li>
<li>Eviction<ul>
<li>Passive<ul>
<li>cache max size</li>
<li>cache max weight</li>
</ul>
</li>
<li>Active<ul>
<li>time to idle - expireAfterAccess()</li>
<li>time to live - expireAfterWrite()</li>
</ul>
</li>
<li>Order<ul>
<li>LRU (Least Recently Used Cache)<ul>
<li>HashMap + DoublyLinkedList</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Two layer caching (L1 + L2 cache)</li>
<li>Cache statistics &amp; performance tuning<ul>
<li>Enable cache runtime configuration<ul>
<li>change max size/weight</li>
</ul>
</li>
<li>Statistics<ul>
<li>Hit rate/ hit count</li>
<li>Miss rate/ miss count</li>
<li>Load exception count</li>
<li>Load success count</li>
<li>Average load penalty</li>
<li>Total load time</li>
</ul>
</li>
</ul>
</li>
<li>RemovalNotification<ul>
<li>Sometimes cached entries are associated with resources which need to be closed or cleaned up</li>
</ul>
</li>
<li>Refresh<ul>
<li><code>Automatic Refresh</code> v.s. <code>Passive Visit-triggered Refresh</code></li>
<li><code>Asynchronized</code> v.s. <code>Synchronized</code></li>
<li><code>Bulk Operation</code> v.s. <code>Single entry</code></li>
</ul>
</li>
<li>Snapshot &amp; iterating<ul>
<li>cache changes dynamically</li>
<li>define asMap() to make a snapshot</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Cache</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt;</span>&#123; </div><div class="line">	<span class="function">V <span class="title">get</span><span class="params">(K key)</span></span>; </div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">put</span><span class="params">(K key, V value)</span></span>; </div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Naive-LRU-Cache-O-N-operation"><a href="#Naive-LRU-Cache-O-N-operation" class="headerlink" title="Naive LRU Cache - O(N) operation"></a>Naive LRU Cache - O(N) operation</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// get O(N)</span></div><div class="line"><span class="comment">// put O(N)</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Cache</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> capacity;</div><div class="line">	<span class="keyword">private</span> Queue&lt;K&gt; queue;</div><div class="line">	<span class="keyword">private</span> Map&lt;K, V&gt; map;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> c)</span></span>&#123;</div><div class="line">		capacity = c;</div><div class="line">		queue = <span class="keyword">new</span> ConcurrentLinkedQueue&lt;K&gt;();</div><div class="line">		map = <span class="keyword">new</span> ConcurrentHashMap&lt;K, V&gt;(capacity);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(K key)</span></span>&#123;</div><div class="line">		<span class="keyword">if</span>(map.containsKey(key)) &#123;</div><div class="line">            <span class="comment">// When getting an element, re-arrange the sequence</span></div><div class="line">            queue.remove((Integer) key);</div><div class="line">            queue.add(key);</div><div class="line">            </div><div class="line">            <span class="keyword">return</span> map.get(key);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(K key, V value)</span></span>&#123;</div><div class="line">		<span class="keyword">if</span>(key == <span class="keyword">null</span> || value == <span class="keyword">null</span>)&#123;</div><div class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">if</span>(map.containsKey(key))&#123;</div><div class="line">			queue.remove(key);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">if</span>(queue.size() &gt;= capacity)&#123;</div><div class="line">			K expiredKey = queue.poll();</div><div class="line"></div><div class="line">			<span class="keyword">if</span>(expiredKey != <span class="keyword">null</span>)&#123;</div><div class="line">				map.remove(expiredKey);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		queue.add(key);</div><div class="line">		map.put(key, value);</div><div class="line">		<span class="comment">// printMapQueue();</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>&#123;</div><div class="line">		map.clear();</div><div class="line">		queue = <span class="keyword">new</span> ConcurrentLinkedQueue&lt;K&gt;();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Advanced-LRU-Cache-O-1-operation"><a href="#Advanced-LRU-Cache-O-1-operation" class="headerlink" title="Advanced LRU Cache - O(1) operation"></a>Advanced LRU Cache - O(1) operation</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Use a doubly linked list</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">V</span>&gt; </span>&#123;</div><div class="line">    K key;</div><div class="line">    V value;</div><div class="line">    Node&lt;V&gt; next;</div><div class="line">    Node&lt;V&gt; prev;</div><div class="line">    </div><div class="line">    <span class="comment">// assume getters / setters / constructors / whatever you need</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// get O(1)</span></div><div class="line"><span class="comment">// put O(1)</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Cache</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> capacity;</div><div class="line">    <span class="keyword">private</span> Node&lt;V&gt; head, end;</div><div class="line">    <span class="keyword">private</span> Map&lt;K, Node&lt;V&gt;&gt; map;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> c)</span> </span>&#123;</div><div class="line">        capacity = c;</div><div class="line">        head = <span class="keyword">new</span> Node&lt;V&gt;();</div><div class="line">        end = head;</div><div class="line">        map = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;();</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(K key)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>(map.containsKey(key)) &#123;</div><div class="line">            Node n = map.get(key);</div><div class="line">            n.prev.next = n.next;</div><div class="line">            end.next = n;</div><div class="line">            end = end.next;</div><div class="line">            </div><div class="line">            <span class="keyword">return</span> map.get(key).getValue();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</div><div class="line">        Node n = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">if</span>(map.containsKey(key)) &#123;</div><div class="line">            n = map.get(key);</div><div class="line">            n.prev.next = n.next;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(map.size() &gt;= capacity) &#123;</div><div class="line">            n = head.next;</div><div class="line">            head.next = n.next;</div><div class="line">            </div><div class="line">            map.remove(n.getKey());</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        Node newn = <span class="keyword">new</span> Node(key, value); </div><div class="line">        end.next = newn;</div><div class="line">        end = end.next;</div><div class="line">        map.put(key, newn);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/08/java/Java-Java-Basics/" itemprop="url">
                  Java - Java Basics
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-08T22:08:43+08:00" content="2016-04-08">
              2016-04-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/08/java/Java-Java-Basics/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/08/java/Java-Java-Basics/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>‘a’ 字符数据<br>“a” 字符串数据</p>
<p>强制类型转换  eg：  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">byte</span> b = <span class="number">3</span>;</div><div class="line">b = (<span class="keyword">byte</span>)(b+<span class="number">5</span>);</div></pre></td></tr></table></figure>
<h2 id="Method-Overload-函数的重载"><a href="#Method-Overload-函数的重载" class="headerlink" title="Method Overload 函数的重载"></a>Method Overload 函数的重载</h2><ul>
<li>同一个类中</li>
<li>同名函数</li>
<li><strong>参数个数</strong>或者<strong>参数类型</strong>不同即可</li>
<li><em>函数重载与返回值类型无关</em></li>
</ul>
<h2 id="Stack-Memory-and-Heap-Memory-栈内存和堆内存"><a href="#Stack-Memory-and-Heap-Memory-栈内存和堆内存" class="headerlink" title="Stack Memory and Heap Memory 栈内存和堆内存"></a>Stack Memory and Heap Memory 栈内存和堆内存</h2><blockquote>
<ul>
<li><code>栈内存 (Stack Memory)</code>: 存储局部变量，该变所属的作用域一旦结束，该变量就自动释放</li>
</ul>
</blockquote>
<ul>
<li><p><code>堆内存 (Heap Memory)</code>: 存储数组和对象（其实数组就是对象），凡是new生成的都存放在堆内存中</p>
<ul>
<li>特点：</li>
</ul>
<ol>
<li>每一个实体都有首地址值  </li>
<li>堆内存中的每一个变量都有默认初始化值</li>
</ol>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Person p = new Person()</div><div class="line"></div><div class="line">  stack                 heap</div><div class="line">--------------|---------------------------</div><div class="line">   | p |      |      |Person|</div><div class="line">--------------|---------------------------</div><div class="line"></div><div class="line">    |                Person object</div><div class="line">    |</div><div class="line">    --------------------&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">Person[99] p = new Person[99];</div><div class="line"></div><div class="line"></div><div class="line">  stack                 heap</div><div class="line"></div><div class="line"></div><div class="line">                     ref of Person     Person objects</div><div class="line">                      |</div><div class="line">                     \/</div><div class="line">--------------|-------------------------------------------------</div><div class="line">  | p |       |      | | | | | |          |Person|    |Person|     |Person| </div><div class="line">--------------|-------------------------------------------------</div><div class="line">                        |  |</div><div class="line">    |                |  |  -------------------------------------------&gt;</div><div class="line">    |                |  ---------------------------------&gt;</div><div class="line">    -------------&gt;   -----------------------&gt;</div></pre></td></tr></table></figure>
<p><strong>reference of Person should be one by one<br>while Person objects do not need to be one by one</strong></p>
<p>##对象 Object</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> n;</div><div class="line">    String color;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"run"</span>+num+color);    </div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span>  <span class="title">Test</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Car c = <span class="keyword">new</span> Car();</div><div class="line">        c.n = <span class="number">1</span>;</div><div class="line">        c.color = <span class="string">"red"</span>;</div><div class="line">        c.run();</div><div class="line"></div><div class="line">        Car c2 = <span class="keyword">new</span> Car();</div><div class="line">        show(c2);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(Car c)</span></span>&#123;</div><div class="line">        sop(<span class="string">"show"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>##匿名对象  Anonymous Object<br>没有名字的对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> Car(); <span class="comment">//匿名对象，其实就是定义对象的简写格式</span></div><div class="line"><span class="keyword">new</span> Car().num = <span class="number">5</span>;</div><div class="line"><span class="keyword">new</span> Car().color=<span class="string">"green"</span>;</div><div class="line"><span class="keyword">new</span>.Car().run();</div></pre></td></tr></table></figure>
<p>匿名对象可以作为实际参数传递</p>
<p>##封装 Encapsulation<br>指隐藏对象的属性和实现细节，仅对外提供公共访问方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age; <span class="comment">//私有</span></div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span></span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(age&gt;<span class="number">0</span> &amp;&amp; age&lt;<span class="number">150</span>)</div><div class="line">            <span class="keyword">this</span>.age = age;</div><div class="line">        <span class="keyword">else</span></div><div class="line">            sop(<span class="string">"wrong data"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.age;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span>  <span class="title">Test</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Person p = <span class="keyword">new</span> Person();</div><div class="line">        p.setAge(<span class="number">40</span>);</div><div class="line">        sop(p.getAge());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>封装的好处：</p>
<ul>
<li>提高安全性</li>
<li>将变化隔离</li>
<li>便于使用</li>
</ul>
<p>##构造函数 Constructor<br>构造函数即创建对象时调用的函数，创建对象都必须通过构造函数初始化<br>一个类中如果没有定义构造函数，那么该类中会有一个默认的空参构造函数；<br>如果在类中定义了指定的构造函数，那么类中的默认构造函数就没有了，所以必须自己写一个默认构造函数，否则compiler会报错  </p>
<p>特点：</p>
<ul>
<li>函数与类名相同</li>
<li>不用定义返回值类型</li>
<li>没有具体的返回值</li>
</ul>
<p>作用： 对对象进行初始化</p>
<p>注意：</p>
<ol>
<li>默认构造函数的特点</li>
<li>多个构造函数是以重载 (overload) 的形式存在的 </li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</div><div class="line"></div><div class="line">    Person()&#123;</div><div class="line">        name = <span class="string">"default"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    Person(String name)&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    Person(String name, <span class="keyword">int</span> age)&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="keyword">this</span>.age = age;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span>  <span class="title">Test</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Person p1 = <span class="keyword">new</span> Person();</div><div class="line">        Person p2 = <span class="keyword">new</span> Person(<span class="string">"p2"</span>);</div><div class="line">        Person p3 = <span class="keyword">new</span> Person(<span class="string">"p3"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>##this 关键字<br>当局部变量与成员变量重名时，用this关键字区分</p>
<p><strong>this 代表当前对象，this就是所在函数所属对象的引用。简单地说，哪个对象调用了this所在的函数，this就代表哪个对象。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</div><div class="line"></div><div class="line">    Person()&#123;</div><div class="line">        <span class="keyword">this</span>.name = <span class="string">"default"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    Person(String name)&#123;</div><div class="line">        <span class="keyword">this</span>();</div><div class="line">        <span class="keyword">this</span>.age = <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    Person(String name, <span class="keyword">int</span> age)&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="keyword">this</span>.age = age;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>##static 关键字 </p>
<ol>
<li>static是一个修饰符（modifier），用于修饰成员，称为静态变量</li>
<li><strong>static修饰的成员被所在类的所有对象共享</strong></li>
<li><strong>static variables 静态变量先于对象存在</strong></li>
<li>static修饰的成员多了一种调用方式   类名.静态成员</li>
<li><strong>static修饰的数据是共享数据，对象中存储的是特有的数据</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</div><div class="line">    String name; <span class="comment">//实例变量，or 成员变量</span></div><div class="line">    <span class="keyword">static</span> String country = <span class="string">"CN"</span>; <span class="comment">//类变量，or静态变量</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(country+name);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span>  <span class="title">Test</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Person p = <span class="keyword">new</span> Person();</div><div class="line">        sop(p.country);</div><div class="line">        sop(Person.country);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>成员变量和静态变量的区别</strong></p>
<ol>
<li><p>生命周期不同<br> 成员变量随着对象的创建而存在，随着对象的被回收而释放<br> 静态变量随着类的加载而存在，随着类的消失而消失  </p>
</li>
<li><p>调用方式不同</p>
</li>
<li><p>别名不同<br> 成员变量称为实例变量<br> 静态变量称为类变量</p>
</li>
<li><p>数据存储的位置不同<br> 成员变量数据存储在<strong>堆内存</strong>中<br> 静态变量数据存储在<strong>方法区（的静态区）</strong>中</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    <span class="keyword">static</span> String country = <span class="string">"CN"</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span></span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(Person.country+<span class="keyword">this</span>.name);</div><div class="line">    &#125;    </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span>  <span class="title">Test</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Person.method();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###静态使用的注意事项</p>
<ol>
<li><strong>静态方法只能访问静态变量（非静态方法可访问静态和非静态变量）</strong></li>
<li><strong>静态方法中不可以使用this或者super关键字</strong></li>
<li>主函数是静态的</li>
</ol>
<p>###主函数的特殊之处</p>
<ol>
<li>格式固定</li>
<li>被JVM所识别和调用</li>
</ol>
<p>public： 权限最大<br>static：不需要对象，直接调用主函数所属类名即可调用<br>void：主函数没有具体的返回值<br>main：函数名，不是关键字，一个被JVM识别的固定名称<br>String[] args： 主函数参数列表，是一个数组类型的参数，而且元素都是字符串类型  </p>
<p>###静态什么时候用？</p>
<ol>
<li>静态变量： 当对象中所具备的成员变量的值都相同时</li>
<li>静态函数： 函数是否用静态修饰就参考一点——该函数功能是否访问到了对象中的特有数据  </li>
</ol>
<p>##静态代码块 staic block<br><strong>随着类的加载而执行，而且只执行一次</strong></p>
<p>作用： 用于给类进行初始化（用的不多）  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">StaticCodes</span></span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">int</span> n;</div><div class="line"></div><div class="line">    <span class="comment">//静态代码块</span></div><div class="line">    <span class="keyword">static</span>&#123;</div><div class="line">        n=<span class="number">1</span>;</div><div class="line">        sop(<span class="string">"hello world"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"show run"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span>  <span class="title">Test</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        StaticCodes.show();</div><div class="line">        <span class="comment">//输出结果   hello world      show run</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>##继承 Inheritance </p>
<p>继承的优点：  </p>
<ul>
<li>提高代码复用性</li>
<li>让类与类之间产生关系，给多态提供了前提</li>
</ul>
<p>java只支持单继承，不直接支持多继承</p>
<p>java支持多层（多重）继承</p>
<p>什么时候定义继承？<br>当类与类之间存在所属关系（is a）的时候，就定义继承</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</div><div class="line">    String name;</div><div class="line">    <span class="keyword">int</span> age;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span>  <span class="title">Test</span></span>&#123;</div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Student s = <span class="keyword">new</span> Student();</div><div class="line">        s.name = <span class="string">"1"</span>;</div><div class="line">        s.age = <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###在子父类中，成员特点的体现    <br></p>
<p>###1. 成员变量 member variables<br>   当本类的成员和局部变量同名，用this区分<br>   当子父类中的成员变量重名，用super区分</p>
<p>this和super用法很相似：<br>this代表当前对象的引用<br>super代表当前对象的父类的空间  </p>
<p><strong>子类不能直接访问父类中的私有内容，必须在父类中定义public getXxx()方法，然后子类用super.getXxx()方法调用</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dad</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> n = <span class="number">4</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Dad</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> n=<span class="number">5</span>;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="keyword">this</span>.n+<span class="string">" "</span>+<span class="keyword">super</span>.n); <span class="comment">//输出 5  4</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###2. 成员函数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dad</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show1</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"dad"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Dad</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show2</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"son"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span>  </span>&#123;</div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Son s = <span class="keyword">new</span> Son();</div><div class="line">        s.show1(); <span class="comment">//output: dad</span></div><div class="line">        s.show2(); <span class="comment">//output: son</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当子父类中出现成员函数一模一样的情况，会运行子类的函数，这称为<strong>覆盖(override)</strong>，这是函数在子父类中的特性</p>
<hr>
<p>函数的两个特性  </p>
<ol>
<li>重载 —— 同一类中  </li>
<li>覆盖 —— 在子类中</li>
</ol>
<p>**覆盖注意事项：  </p>
<ol>
<li>子类方法覆盖父类方法时，子类权限必须要大于等于父类权限  </li>
<li>静态只能覆盖静态**  </li>
</ol>
<p>什么时候用覆盖？<br>当对一个类进行子类的扩展时，子类需要保留父类的功能声明，但要定义子类中该功能的特有内容时，就用覆盖。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">call</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"phone"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Smartphone</span> <span class="keyword">extends</span> <span class="title">Phone</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">super</span>.show();</div><div class="line">        sop(<span class="string">"smartphone"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###3. 子父类的构造函数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> age;</div><div class="line">    String name;</div><div class="line">    </div><div class="line">    Person(<span class="keyword">int</span> age)&#123;</div><div class="line">        <span class="keyword">this</span>.age = age;    </div><div class="line">    &#125;</div><div class="line"></div><div class="line">    Person(<span class="keyword">int</span> age, String name)&#123;</div><div class="line">        <span class="keyword">this</span>(age);</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</div><div class="line">    String id;</div><div class="line"></div><div class="line">    Student(<span class="keyword">int</span> age, String name, String id)&#123;</div><div class="line">        <span class="keyword">super</span>(age, name);</div><div class="line">        <span class="keyword">this</span>.id = id;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">```  </div><div class="line"></div><div class="line">``` java  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dad</span></span>&#123;</div><div class="line">    Dad()&#123;</div><div class="line">        sop(<span class="string">"1"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    Dad(<span class="keyword">int</span> x)&#123;</div><div class="line">        sop(<span class="string">"2"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Dad</span></span>&#123;</div><div class="line">    Son()&#123;</div><div class="line">        <span class="comment">//super;  隐式语句，调用的是父类中空参的构造函数</span></div><div class="line">        sop(<span class="string">"3"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    Son(<span class="keyword">int</span> x)&#123;</div><div class="line">        <span class="comment">//super;  隐式语句，调用的是父类中空参的构造函数</span></div><div class="line">        sop(<span class="string">"4"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        <span class="keyword">new</span> Son(<span class="number">5</span>); <span class="comment">//输出   1  4</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>在子类构造对象时，发现访问子类构造函数时，父类也运行了，原因是：子类的构造函数中第一行有一个默认的隐式语句： super();</strong>  </p>
<p><strong>子类的实例化过程，子类中多有的构造函数都默认会访问父类中的空参数的构造函数</strong>  </p>
<p><strong>为什么子类实例化的时候要访问父类中的构造函数？<br>因为子类继承了父类，获取到了父类中的内容（属性），所以在使用父类内容之前，要先看父类是如何对自己的内容进行初始化的</strong>  </p>
<p><strong>如果父类中没有定义空参构造函数，那么子类的构造函数必须用super明确要调用的父类中的哪个构造函数</strong>  </p>
<p><strong>同时子类构造函数中如果使用this调用了本类构造函数时，那么super就没有了，因为super和this都只能定义第一行，所以只能有一个。但是可以保证的是，子类中肯定会有其他的构造函数访问父类的构造函数</strong>  </p>
<p><strong>注意：super语句必须要定义在子类构造函数的第一行，因为父类的初始化动作必须先完成</strong>  </p>
<p>##一个对象的实例化过程<br>1，JVM读取指定路径下的Person.class文件，加载进内存，并会先加载Person的父类（如果有直接父类）<br>2，在对内存中开辟空间，分配地址<br>3，在对象空间中，对对象中的属性进行默认初始化<br>4，调用对应的构造函数进行初始化<br>5，在构造函数中，第一行会先调用父类中的构造函数进行初始化<br>6，父类初始化完毕后，再对子类的属性进行显示初始化<br>7，再进行子类构造函数的特定初始化<br>8，初始化完毕后，将地址值赋值给引用变量  </p>
<p>##final 关键字<br>继承的弊端：打破了封装性</p>
<p>1，final是一个修饰符，可以修饰类、方法、变量<br>2，<strong>final修饰的类不可以被继承</strong><br>3，<strong>final修饰的方法不可以被覆盖</strong><br>4，final修饰的变量是一个常量，只能赋值一次  </p>
<p>为什么要用final修饰变量，其实在程序中如果一个数据是固定的，那么直接就用这个数据就可以了，但是这样阅读性差，这个变量的值不能变化，所以加上final固定</p>
<p>写法规定：常量所有字母都大写，中间用_隔开</p>
<p>##抽象类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>; <span class="comment">//注意！没有&#123;&#125;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="number">2</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">roar</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">roar</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"dog"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">roar</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"cat"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###抽象类的特点<br>1，方法只有声明没有实现时，是抽象方法，需要被abstract修饰<br>      <strong>抽象方法必须定义在抽象类中，该类必须被abstract修饰</strong>  </p>
<p>2，抽象类不能被实例化，不能用new创建对象    </p>
<p>3，<strong>抽象类必须由其子类覆盖了所有抽象方法后，该子类才能实例化，否则，该子类还是抽象类</strong>  </p>
<p>1，<strong>抽象类中有构造函数么？     有，用于给子类初始化</strong>  </p>
<p>2，<strong>抽象类可以不定义抽象方法么？  可以，但少见</strong>，目的是不让该类创建对象，AWT的适配器对象就是这种类<br>通常这个类中的方法有方法体，但是却没有内容<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span>  <span class="title">Test</span></span>&#123;</div><div class="line">    <span class="comment">//与void show(); 有本质区别</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3，抽象关键字不可以与哪些关键字共存？<br>private   不行   -&gt;  不能覆盖<br>static    不行<br>final     不行   -&gt;  不能覆盖<br>public    可以</p>
<p>4，<strong>抽象类和一般类的异同点<br>相同点：都用来描述事物，都在内部定义成员<br>不同点：<br>1）一般类有足够的信息描述事物 &lt;-&gt; 抽象类描述事物的信息可能不足<br>2）一般类中不能定义抽象方法，只能定义非抽象方法 &lt;-&gt; 抽象类中可定义抽象方法，同时也可定义非抽象方法<br>3）一般类可以被实例化 &lt;-&gt; 抽象类不可以被实例化</strong>  </p>
<p>5，抽象类一定是父类吗？<br>是的，因为需要子类覆盖其方法后才可以对子类实例化  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*雇员示例：</span></div><div class="line">需求：</div><div class="line">- 公司中程序员有姓名，工号，薪水，工作内容</div><div class="line">- 项目经理除此之外还有奖金</div><div class="line">- 对给出的需求进行数据建模</div><div class="line"></div><div class="line">分析：</div><div class="line">在此问题领域中，先找出涉及的对象。通过名词提炼法：</div><div class="line">程序员：  </div><div class="line">属性：姓名，工号，薪水 </div><div class="line">行为：工作</div><div class="line"></div><div class="line">经理：</div><div class="line">属性：姓名，工号，薪水，奖金</div><div class="line">行为：工作</div><div class="line"></div><div class="line">程序员和经理不存在直接的继承关系，但程序员和经理却具有共性内容。可以进行抽取，建立体系，因为他们都是公司职员 */</div><div class="line"></div><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    <span class="keyword">private</span> String id;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">double</span> salary;</div><div class="line">    </div><div class="line">    Employee(String name. String id, <span class="keyword">double</span> salary)&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="keyword">this</span>.id = id;</div><div class="line">        <span class="keyword">this</span>.salary = salary;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Programmer</span> <span class="keyword">extends</span> <span class="title">Employee</span></span>&#123;</div><div class="line">    Programmer(String name, String id, <span class="keyword">double</span> salary)&#123;</div><div class="line">        <span class="keyword">super</span>(name, id, salary);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"programmer work"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Manager</span> <span class="keyword">extends</span> <span class="title">Employee</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> doubel bonus;</div><div class="line"></div><div class="line">    Manager(String name, String id, <span class="keyword">double</span> salary, <span class="keyword">double</span> bonus)&#123;</div><div class="line">        <span class="keyword">super</span>(name, id, salary);</div><div class="line">        <span class="keyword">this</span>.bonus = bonus;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"manager work"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>##接口 Interface</p>
<p>当一个抽象类中的方法都是抽象的时候，可以将该抽象类用另一种形式定义和表示，即接口（interface）</p>
<p><strong>定义接口的关键字不是class，是interface，但编译以后还是class，interface只是换了一种表述方式</strong></p>
<p>对于接口中常见的成员，都有固定的修饰符  </p>
<ol>
<li><strong>全局常量  public static final</strong>  </li>
<li><strong>抽象方法  public abstract</strong><br>由此得出结论，接口中的成员都是公共的权限</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">interface</span>  <span class="title">A</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> n =<span class="number">1</span>;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>类与类是继承关系，类与接口是实现关系</strong><br><strong>接口不可以实例化，只能由实现了接口的子类并覆盖了接口中所有抽象方法后，该子类才可以实例化</strong>  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span> <span class="keyword">implements</span> <span class="title">A</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">dE</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        D d = <span class="keyword">new</span> D();</div><div class="line">        sop(d.n); <span class="comment">//三种方式都对</span></div><div class="line">        sop(D.n);</div><div class="line">        sop( .n);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在java中不支持多继承，因为会出现调用的不确定性，所以java将多继承机制进行改良，变为多实现。<br>一个类可以实现多个接口  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">B</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">method3</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AB</span> <span class="keyword">implements</span> <span class="title">A</span>, <span class="title">B</span></span>&#123; <span class="comment">//multiple implementation</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>&#123;&#125; <span class="comment">//override the method1() function in A and B</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###接口的特点  features of interface<br>1，接口是对外暴露的规则<br>2，接口是程序的功能扩展<br>3，接口的出现降低耦合性   reduces coupling<br>4，接口可以用来多实现     multiple implementations</p>
<p>###接口与抽象类的异同<br>相同点： abstract from lower levels to upper levels</p>
<p>不同点：  </p>
<ol>
<li>抽象类需要被继承，只能单继承  an abstract class has to be inherited, and only single inheritance is allowed<br>接口需要被实现，可以多实现  an interface has to be implemented, and multiple implementations are allowed</li>
</ol>
<p>2.<strong>抽象类中可以定义抽象方法和非抽象方法</strong>，子类继承后，可以直接使用非抽象方法<br>  <strong>an abstract class can contain abstract methods and non-abstract methods.</strong> When a subclass inherits a abstract class, the subclass can use non-abstract methods directly </p>
<p>  接口中只能定义抽象方法，必须由子类去实现<br>  an interface can only contain abstract methods, and all these abstract methods have to be implemented by subclass</p>
<p>3.抽象类的继承是 is a 关系，定义该体系的基本共性内容<br>  inheritance from an abstract class is an “is a” relationship, it defines the common content of the inheritance system</p>
<p>  接口的实现是 like a 关系，定义体系的额外功能<br>  implementation of an interface is a “like a” relationship, it defines extra functions of the system</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">roar</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">class</span> <span class="title">Navi</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">navi</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Navidog</span> <span class="keyword">extends</span> <span class="title">Dog</span> <span class="keyword">implements</span> <span class="title">Navi</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">roar</span><span class="params">()</span></span>&#123;&#125;;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">navi</span><span class="params">()</span></span>&#123;&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>##多态 polymorphism</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;&#125;</div><div class="line"></div><div class="line">Animal c = <span class="keyword">new</span> Cat();</div></pre></td></tr></table></figure>
<p><strong>Cat这类事物既具备了Cat的形态，又具备了Animal的形态，这就是对象的多态性<br>简单说，就是一个对象对应着不同类型<br>多态在代码中的体现：父类或者接口的引用指向其子类的对象</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"啃骨头"</span>);</div><div class="line">    &#125;</div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lookHome</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"看家"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"吃鱼"</span>);</div><div class="line">    &#125;</div><div class="line">     <span class="function"><span class="keyword">void</span> <span class="title">catchMouse</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"抓老鼠"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pig</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"饲料"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">gongDi</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"拱地"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Poly</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        Animal a = <span class="keyword">new</span> Cat(); </div><div class="line">        <span class="comment">/* </span></div><div class="line">           自动类型提升，猫对象提升为动物类型。我们可以访问Animal和Cat的共有方法，</div><div class="line">        由于Cat对Aminal中的方法进行了覆盖，所以实际是运行Cat中的方法但是cat的特有</div><div class="line">        方法无法访问。向上转型的作用就是限制对特有功能的访问。专业讲：向上转型。将子</div><div class="line">        类型隐藏，就不能使用子类的特有方法。</div><div class="line">        */</div><div class="line">        a.eat();  <span class="comment">//output: 吃鱼</span></div><div class="line"></div><div class="line">        <span class="comment">//如果还想用具体动物猫的特有功能，你可以将该对象进行类型强转，向下转型。</span></div><div class="line">        Cat c = (Cat)a;  <span class="comment">//向下转型的目的是为了使用子类中的特有方法</span></div><div class="line">        c.eat();  <span class="comment">//output: 吃鱼</span></div><div class="line">        c.catchMouse();</div><div class="line"> </div><div class="line">        <span class="comment">//注意：对于转型，自始自终都是子类对象在做着类型的变化。</span></div><div class="line">        Animal a1 = <span class="keyword">new</span> Dog();</div><div class="line">        Cat c1 = (Cat)a1;  <span class="comment">//会抛异常ClassCastException</span></div><div class="line">   &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">(Animal a)</span></span>&#123;  <span class="comment">//Animal a = new Dog()</span></div><div class="line">        a.eat();</div><div class="line"> </div><div class="line">        <span class="keyword">if</span>(a <span class="keyword">instanceof</span> Cat) &#123;  </div><div class="line">              <span class="comment">/*</span></div><div class="line">                  instanceof：用于判断对象的具体类型。只能用于引用数据类型判断。</div><div class="line">              通常在向下转型前用于健壮性的判断 </div><div class="line">              */</div><div class="line">              Cat c = (Cat)a;</div><div class="line">              c.catchMouse();</div><div class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(a <span class="keyword">instanceof</span> Dog)&#123;</div><div class="line">                Dog d = (Dog)a;</div><div class="line">                d.lookHome();</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">        &#125; </div><div class="line">    &#125;     </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>instanceof  用于判断对象的具体类型</strong>  </p>
<p>向下转型<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;&#125;</div><div class="line"></div><div class="line">A a =  <span class="keyword">new</span> B();</div><div class="line">B b = (B) b;</div></pre></td></tr></table></figure></p>
<p><strong>多态的好处：提高了代码的扩展性，前期定义的代码可以使用后期的内容<br>多态的弊端：前期代码不能使用（调用）后期子类的特有内容</strong></p>
<p><strong>多 态 的 前 提<br>1，必须有关系：继承或实现<br>2，要有覆盖</strong></p>
<p>###多 态 时，成 员 的 特 点<br>1，成员变量：<strong>了解即可</strong><br>     编译时，参考引用型变量所属的类中是否有调用的成员变量，有，编译通过；没有，编译失败<br>     运行时，参考引用型变量所属的类中是否有调用的成员变量，并运行该所属类中的成员变量<br>     简单说，编译和运行都参考等号左边的类型<br>      <strong>即 Fu f=new Zi(); 属于Fu类</strong>   </p>
<p>2，<strong>成员函数（非静态）：非常重要！</strong><br>     编译时，参考引用型变量所属的类中是否有调用的函数，有，编译通过；没有，编译失败<br>     运行时，参考的是对象所属的类中是否有调用的函数<br>     简单地说，<strong>编译看左边，运行看右边</strong></p>
<p>3，静态函数<br>     编译时，参考引用型变量所属的类中是否有调用的成员    变量<br>     运行时，参考引用型变量所属的类中是否有调用的成员变量<br>     简单说，编译和运行都参考等号左边的类型<br>     其实对于静态方法，不需要对象，直接用类名调用就行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dad</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> n=<span class="number">1</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"Dad"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"Dad static"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Dad</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> n=<span class="number">2</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"Son"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"Son static"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Poly</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Dad d=<span class="keyword">new</span> Son(); <span class="comment">//d是Dad类的实例</span></div><div class="line">        sop(d.num);      <span class="comment">//结果是1！</span></div><div class="line">        d.show();        <span class="comment">//结果是Son，是因为覆盖，但Dad中必须有show()才能通过编译</span></div><div class="line">        d.method();      <span class="comment">//结果是Dad static，不需要，因为直接用Dad.method() 或 Son.method()就行</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>##内部类 inner class</p>
<p>内 部 类 访 问 特 点<br><strong>1，内部类可以直接访问外部类中的成员<br>2，外部类要访问内部类，必须建立内部类对象</strong><br>     <strong>例子：铁扇公主与孙悟空</strong></p>
<p>一般用于类的设计<br>分析事物时，发现该事物描述中还有事物，而且这个事物还在访问被描述事物的内容，这时就把还有的事物定义为内部来描述  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> n=<span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="comment">//内部类</span></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>&#123;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">show1</span><span class="params">()</span></span>&#123;</div><div class="line">            sop(<span class="string">"show1 run"</span>+n);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">/*  如果内部类中定义了静态成员，该内部类也必须是静态的</span></div><div class="line">        static void show2()&#123;</div><div class="line">            sop("show2 run"+n);</div><div class="line">        &#125;</div><div class="line">        */</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</div><div class="line">        Inner in = <span class="keyword">new</span> Inner();</div><div class="line">        in.method1();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span>  </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Outer o = <span class="keyword">new</span> Outer();</div><div class="line">        out.method();  <span class="comment">//直接访问外部类中的内部类中的成员</span></div><div class="line">        </div><div class="line">        Outer.Inner i1 = <span class="keyword">new</span> Outer().new Inner();</div><div class="line">        in.show();  <span class="comment">//通过创建内部类访问内部类中的成员</span></div><div class="line"></div><div class="line">        <span class="comment">//如果内部类是静态的，其就相当于一个外部类</span></div><div class="line">        Outer.Inner i2 = <span class="keyword">new</span> Outer.Inner();</div><div class="line">        in.show();</div><div class="line">        </div><div class="line">        <span class="comment">//如果内部类是静态的，成员是静态的</span></div><div class="line">        Outer.Inner.show2();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>为什么内部类能直接访问外部类中的成员呢？</strong><br><strong>因为内部类持有了外部类的引用 —— 外部类名.this</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> n = <span class="number">3</span>;</div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>&#123;</div><div class="line">        <span class="keyword">int</span> n = <span class="number">4</span>;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</div><div class="line">            <span class="keyword">int</span> n = <span class="number">5</span>;</div><div class="line">            sop(Outer.<span class="keyword">this</span>.n); <span class="comment">//输出 3</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">new</span> Inner().show();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span>  </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        <span class="keyword">new</span> Outer().method();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>内部类可以存放在局部位置上<br><strong>内部类在局部位置上只能访问局部中被final修饰的局部变量</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> n = <span class="number">3</span>;</div><div class="line"></div><div class="line">    <span class="function">Object <span class="title">method</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> x = <span class="number">9</span>;</div><div class="line">    </div><div class="line">        <span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>&#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</div><div class="line">                <span class="keyword">return</span> <span class="string">"Inner..."</span> + x;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        Object in = <span class="keyword">new</span> Inner();</div><div class="line">        <span class="keyword">return</span> in;  <span class="comment">//0x0045</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span>  </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Outer out = <span class="keyword">new</span> Outer();</div><div class="line">        Object obj = out.method();</div><div class="line">        sop(obj);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###匿名内部类  Anonymous Inner Classes<br>匿名内部类——就是内部类的简写形式<br>必须有前提：内部类必须继承或者实现一个外部类或者接口</p>
<p>匿名内部类：其实就是一个匿名子类对象<br>格式：new superclass/interface(){ }</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Abst</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> n = <span class="number">4</span>;</div><div class="line">    </div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Inner</span> <span class="keyword">extends</span> <span class="title">Abst</span></span>&#123;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</div><div class="line">            sop(<span class="string">"show..."</span>+n);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">new</span> Inner().show();</div><div class="line">        <span class="comment">//或者</span></div><div class="line">        <span class="keyword">new</span> Abst()&#123;  <span class="comment">// anonymous inner class</span></div><div class="line">            <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</div><div class="line">                sop(<span class="string">"show..."</span>+n);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span>  </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        <span class="keyword">new</span> Outer().method();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Interf</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer</span></span>&#123;</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Inner</span> <span class="keyword">implements</span> <span class="title">Interf</span></span>&#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</div><div class="line">        Interf i = <span class="keyword">new</span> Interf()&#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        i.show();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>通常使用场景之一<br>当函数参数是接口类型时，而且接口中的方法不超过三个，可以用匿名内部类作为实际参数进行传递</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span>  </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>&#123;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        sop(<span class="string">"Hello World!"</span>);</div><div class="line"></div><div class="line">        show(<span class="keyword">new</span> Interf()&#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(Interf i)</span></span>&#123;</div><div class="line">        i.show();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</div><div class="line">        Object obj = <span class="keyword">new</span> Object()&#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</div><div class="line">                sop(<span class="string">"show run"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        obj.show(); <span class="comment">//因为匿名内部类这个子类对象被向上转型为了Object类，这样就不能使用子类特有的方法</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span>  </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        <span class="keyword">new</span> Outer().method();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>##对象初始化<br><img src="https://raw.github.com/phoenixjiangnan/phoenixjiangnan.github.com/master/images/2013-01/object-initialization.png">  <img src="https://raw.github.com/phoenixjiangnan/phoenixjiangnan.github.com/master/images/2013-01/object-initialization2.png"> </p>
<p>##异 常 Exception<br>异常：是在运行时期发生的不正常的情况  </p>
<p>在java中用类的形式对不正常情况进行了描述和封装对象<br>描述不正常的情况的类，就成为异常类 Exception</p>
<p>以前：正常流程代码和问题处理代码相结合<br>现在：将正常流程代码和问题处理代码分离，提高阅读性</p>
<p>其实异常就是java通过面向对象的思想将问题封装成了对象，用异常类进行描述。问题很多，意味着描述的类也很多，将其共性进行向上抽取，形成了异常体系</p>
<p>###不正常情况分为两大类<br>1，一般不可处理的 Error 是由JVM抛出的严重性的问题，一般不针对性处理，直接修改程序<br>2，可处理的  Exception<br>该体系的特点在于Throwable及其所有的子类都具有可抛性 Throwable -&gt;  通过两个关键字来体现  throws   throw 凡是被两个关键字所操作的类和对象都具备可抛型</p>
<p>该体系的特点：子类的后缀名都是用其父类名作为后缀，阅读性很强<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MinusIndexException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;</div><div class="line">    MinusIndexException()&#123;&#125;</div><div class="line">    MinuxIndexException(String msg)&#123;</div><div class="line">        <span class="keyword">super</span>(msg);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span>  </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">method</span><span class="params">(<span class="keyword">int</span>[]arr. <span class="keyword">int</span> index)</span> <span class="keyword">throws</span> MinusIndexException</span>&#123;</div><div class="line">        <span class="keyword">if</span>(arr==<span class="keyword">null</span>)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(<span class="string">"数组为空"</span>);</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(arr.length&lt;=index)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ArrayOutOfBoundsException(<span class="string">"数组角标越界"</span>);</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(index&lt;<span class="number">0</span>)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> MinusIndexException(<span class="string">"角标为副"</span>);</div><div class="line"></div><div class="line">        <span class="keyword">return</span> arr[index];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Exception</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> MinusIndexException</span>&#123;</div><div class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>];</div><div class="line">        </div><div class="line">          d = <span class="keyword">new</span>  ();</div><div class="line">        <span class="keyword">int</span> n =  d.method(<span class="keyword">null</span>,-<span class="number">30</span>);</div><div class="line">        d.method(arr,<span class="number">3</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>###异常抛出过程<br><img src="https://raw.github.com/phoenixjiangnan/phoenixjiangnan.github.com/master/images/2013-01/throw-exception.png"></p>
<p>###异 常 的 分 类<br><strong>1，编译时被检测异常 :<br>exception that will be detected during compiling：</strong>  </p>
<p>只要是Exception及其子类都是，除了特殊子类RuntimeException体系<br>这种问题一旦出现，希望在编译时就进行检测，让这种问题有对应的处理方式，因为这类问题都可以针对性的处理</p>
<p><strong>2，编译时不检测异常（运行时异常）<br>exception that won’t be detected during compiling :</strong>  </p>
<p>就是Exception中的RuntimeException及其子类<br>这种问题的发生无法让功能继续，运算无法进行，更多是因为调用的原因导致的，或者引发了内部状态的改变导致的<br>这种问题一般不处理，直接编译通过，让调用者调用时的程序强制停止，让调用者对代码进行修改</p>
<p>所以自定义异常时，须继承Exception或RuntimeException</p>
<p><strong>throws和throw的区别<br>1，throws使用在函数上；throw使用在函数内<br>2，throws抛出的是异常类，可以抛出多个，用逗号隔开；throw抛出的是异常对象</strong></p>
<p>###自定义异常  user-defined exception<br>按照java异常的创建思想，面向对象，进行自定义描述，并封装成对象  </p>
<p>注意：如果让一个类成为异常类，必须要继承异常体系，因为只有成为异常体系的子类才有资格具备可抛型，才可以被两个关键字所操作  throws   throw  </p>
<p>###异常捕捉<br>异常处理的捕捉形式：对异常进行针对性处理的方式</p>
<p>格式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">try&#123;</div><div class="line">    //需要被检测异常的代码    </div><div class="line">&#125;catch(异常类  变量)&#123;   //该变量用于接收发生的异常对象</div><div class="line">    //处理异常的代码</div><div class="line">&#125;finally&#123;</div><div class="line">    //一定会被执行的代码</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>###异常处理的原则<br>1，函数内容如果抛出需要检测的异常，那么<strong>函数上</strong>必须要声明，否则必须在函数内用try catch捕捉，否则编译失败</p>
<p><strong>2，如果调用到了声明异常的函数，要么try catch，要么throws，否则编译失败</strong></p>
<p><strong>3，什么时候catch，什么时候throws？<br>功能内部可以解决，用catch<br>解决不了，用throws告诉调用者，由调用者解决</strong>  </p>
<p>4，一个功能如果抛出了多个异常，则调用时必须对多个catch进行针对性的处理<br>内部有几个需要检测的异常，就抛出几个异常，就catch几个  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MinusIndexException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;</div><div class="line">    MinusIndexException()&#123;&#125;</div><div class="line">    MinusIndexException(String msg)&#123;</div><div class="line">        <span class="keyword">super</span>(msg);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">method</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> index)</span> <span class="keyword">throws</span> NullPointerException, MinusIndexException</span>&#123;</div><div class="line">        <span class="keyword">if</span>(arr==<span class="keyword">null</span>)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(<span class="string">"没有任何数组实体"</span>);</div><div class="line">        <span class="keyword">if</span>(index&lt;<span class="number">0</span>)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> MinusIndexException();</div><div class="line"></div><div class="line">        <span class="keyword">return</span> arr[index];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span>  </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>];</div><div class="line">        Test t = <span class="keyword">new</span> Test();</div><div class="line"></div><div class="line">        <span class="keyword">try</span>&#123;</div><div class="line">            <span class="keyword">int</span> n = d.method(<span class="keyword">null</span>,-<span class="number">1</span>);</div><div class="line">            sop(<span class="string">"n="</span>+n);</div><div class="line">        &#125;<span class="keyword">catch</span>(NullPointerException e)&#123;</div><div class="line">            sop(<span class="string">"e.toString"</span>);</div><div class="line">        &#125;<span class="keyword">catch</span>(MinusIndexException e)&#123;</div><div class="line">            sop(<span class="string">"message: "</span>+e.getMessage());</div><div class="line">            sop(<span class="string">"string: "</span>+e.toString());</div><div class="line"></div><div class="line">            e.printStackTrace(); <span class="comment">//JVM默认的异常处理机制就是调用一场对象这个方法</span></div><div class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">show</span><span class="params">(<span class="keyword">int</span> index)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(index&lt;<span class="number">0</span>)&#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ArrayIndexOutOfBoundsException();</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>];</div><div class="line">        <span class="keyword">return</span> arr[index];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###异常处理 （try catch）<br><img src="https://raw.github.com/phoenixjiangnan/phoenixjiangnan.github.com/master/images/2013-01/try-catch-exception.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">show</span><span class="params">(<span class="keyword">int</span> index)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(index&lt;<span class="number">0</span>)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ArrayIndexOutOfBoundsException();</div><div class="line"></div><div class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> arr[<span class="number">3</span>];</div><div class="line">        <span class="keyword">return</span> arr[index];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Test t = <span class="keyword">new</span> Test();</div><div class="line"></div><div class="line">        <span class="keyword">try</span>&#123;</div><div class="line">            t.show(-<span class="number">1</span>);</div><div class="line">        &#125;<span class="keyword">catch</span>(ArrayIndexOutOfBoundsException e)&#123;</div><div class="line">            sop(e.toString());</div><div class="line">            <span class="keyword">return</span>; <span class="comment">//在此处结束运行，执行finally&#123;&#125;的内容   </span></div><div class="line">            <span class="comment">//System.exit(0);  //退出JVM， 什么都不执行</span></div><div class="line">        &#125;<span class="keyword">finally</span>&#123;</div><div class="line">            sop(<span class="string">"finally"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###try catch finally 代码块组合的特点<br>形式<br>1, try catch finally  </p>
<p>2, try catch (multiple)<br>if there’s no resource that has to be released, finally block is unnecessary  </p>
<p>3, try finally<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">void show()&#123;</div><div class="line">    try&#123;</div><div class="line">        throw new Exception();</div><div class="line">    &#125;catch(Exception e)&#123;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void show() throws Exception&#123;</div><div class="line">    try&#123;</div><div class="line">        throw new Exception()</div><div class="line">    &#125;finally&#123;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">class SQLAddException extends Exception&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void addData(Data d) throws SQLAddException&#123;  //SQLException</div><div class="line">    connect to DB....</div><div class="line">    </div><div class="line">    try&#123;</div><div class="line">        add data, exception occurs...</div><div class="line">    &#125;catch(SQLException e)&#123;</div><div class="line">        throw new SQLAddException(); //Exception transition </div><div class="line">    &#125;finally&#123;</div><div class="line">        close DB connection...</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###异常的注意事项<br><strong>1，子类在覆盖父类方法时，父类的方法如果抛出了异常，那么子类的方法只能抛出父类的异常或该异常的子类</strong></p>
<p><strong>2，如果父类抛出多个异常，那么子类只能抛出父类异常的子集<br>如果父类的方法没有抛出异常，那么子类覆盖时绝对不能抛出异常</strong>    </p>
<p>简单说：子类覆盖父类只能抛出父类的异常或者子类或者子集。注意：如果父类的方法没有抛出异常，那么子类覆盖时绝对不能抛，就只能try .</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Exception   |--A  </div><div class="line">              |--B  </div><div class="line">            |--C</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Superc</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> <span class="keyword">throws</span> A</span>&#123;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subc</span> <span class="keyword">extends</span> <span class="title">Superc</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> <span class="keyword">throws</span> A, B</span>&#123;</div><div class="line">        可抛A,B，不可抛C</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BlueScreenException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;</div><div class="line">    BlueScreenException(String msg)&#123;</div><div class="line">        <span class="keyword">super</span>(msg);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PowerException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;</div><div class="line">    PowerException(String msg)&#123;</div><div class="line">        <span class="keyword">super</span>(msg);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DelayException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;</div><div class="line">    DelayException(String msg)&#123;</div><div class="line">        <span class="keyword">super</span>(msg);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Computer</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> status = <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> <span class="keyword">throws</span> BlueScreenException, PowerException</span>&#123;</div><div class="line">        <span class="keyword">if</span>(status==<span class="number">1</span>)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> BlueScreenException();</div><div class="line">        <span class="keyword">if</span>(status==<span class="number">2</span>)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> PowerException();</div><div class="line">        </div><div class="line">        sop(<span class="string">"computer is running"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">()</span></span>&#123;</div><div class="line">        status = <span class="number">0</span>;</div><div class="line">        sop(<span class="string">"computer restarts"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    <span class="keyword">private</span> Computer comp;</div><div class="line"></div><div class="line">    Teacher(String name)&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        comp = <span class="keyword">new</span> Computer();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">teach</span><span class="params">()</span> <span class="keyword">throws</span> DelayException</span>&#123;</div><div class="line">        <span class="keyword">try</span>&#123;</div><div class="line">            comp.run();</div><div class="line">            sop(<span class="string">"teaching"</span>);</div><div class="line">        &#125;<span class="keyword">catch</span>(BlueScreenException e)&#123;</div><div class="line">            sop(e.toString());</div><div class="line"></div><div class="line">            comp.reset();</div><div class="line">            teach();</div><div class="line">        &#125;<span class="keyword">catch</span>(PowerException e)&#123;</div><div class="line">            sop(e.toString());</div><div class="line">            doExercise();</div><div class="line"></div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> DelayException();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doExercise</span><span class="params">()</span></span>&#123;</div><div class="line">        sop(<span class="string">"everyone does some exercise"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Teacher t = <span class="keyword">new</span> Teacher(<span class="string">"John"</span>);</div><div class="line"></div><div class="line">        <span class="keyword">try</span>&#123;</div><div class="line">            t.teach();  <span class="comment">//遇到PowerException，抛出DelayException</span></div><div class="line">        &#125;<span class="keyword">catch</span>(DelayException e)&#123;</div><div class="line">            sop(e.toString());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>##Object 类   Object class<br>Object: 所有类的根类<br>Object是不断抽取而来、具备所有对象都具备的共性内容  </p>
<p>常用共性方法<br>boolean equals(Object obj)  —— 比较的是地址</p>
<p><strong>一般会覆盖equals()方法，根据对象的特有内容，建立判断对象是否相同的依据</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</div><div class="line">    </div><div class="line">    Person(<span class="keyword">int</span> age)&#123;</div><div class="line">        <span class="keyword">this</span>.age = age;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">compare</span><span class="params">(Person p)</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.age==p.age;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(!(obj <span class="keyword">instanceof</span> Person))&#123;</div><div class="line">            <span class="comment">//return false;</span></div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ClassCastException(<span class="string">"类型错误"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        Person p = (Person) obj;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.age==p.age; <span class="comment">//obj向上转型，特有成员隐藏</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Person p1 = <span class="keyword">new</span> Person(<span class="number">20</span>);</div><div class="line">        Person p2 = <span class="keyword">new</span> Person(<span class="number">20</span>);</div><div class="line">        </div><div class="line">        sop(p1.equals(p2));  <span class="comment">//true</span></div><div class="line"></div><div class="line">        Person p3 = p1;</div><div class="line"></div><div class="line">        sop(p1==p2); <span class="comment">//false</span></div><div class="line">        sop(p1.equals(p2)); <span class="comment">//false</span></div><div class="line">        sop(p1.equals(p3)); <span class="comment">//true</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">class Employee&#123;</div><div class="line">	...</div><div class="line"></div><div class="line">	public boolean equals(Object obj)&#123;</div><div class="line">		if(this==obj)</div><div class="line">			return true;</div><div class="line">			</div><div class="line">		if(obj==null)</div><div class="line">			return flase;</div><div class="line">			</div><div class="line">		if(getClass()!=obj.getClass())</div><div class="line">			return false;</div><div class="line">			</div><div class="line">		Employee e = (Employee)obj;</div><div class="line">		return name.equals(e.name)&amp;&amp;salary==e.salary&amp;&amp;hireDay.equals(e.hireDay);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">``` </div><div class="line"></div><div class="line">###hashCode() function</div><div class="line">**p如果重新定义了equals方法，就必须重新定义hashCode方法，以便用户可以讲对象插入到散列表中**</div><div class="line"></div><div class="line">``` java</div><div class="line">class Employee&#123;</div><div class="line">	…</div><div class="line">	</div><div class="line">	public int hashCode()&#123;</div><div class="line">		return 7*name.hashCode()+11*new Double(salary).hashCode()+13*hireDay.hashCode();</div><div class="line">	&#125; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###getClass() function</p>
<p>###toString() function<br>obj.toString() 与 obj.getClass().getName()+”@”+Integer.toHexString(obj.hashCode()) 的结果相同</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span>&#123;</div><div class="line">	…</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> getClass().getName()+name+salary+hireDay;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Manager</span> <span class="keyword">extends</span> <span class="title">Employee</span></span>&#123;</div><div class="line">	…</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">super</span>.toString()+bonus;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>##Package 包<br>• 对类文件进行分类管理<br>• 给类提供多层命名（名称）空间<br>• 写在程序文件的第一行<br>• 类名的全称是  包名.类名<br>• 包也是一种封装形式  </p>
<p>###包之间的访问<br>包与包之间的类进行访问，被访问的包中的类必须是public的，被访问的包中的类的方法也必须是public的  </p>
<p>import 干嘛用的啊？为了简化类名书写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">         public   protected     default   private  </div><div class="line"></div><div class="line">          </div><div class="line">同一类中   ok         ok           ok        ok  </div><div class="line"></div><div class="line"></div><div class="line">同一包中   ok         ok           ok             </div><div class="line"></div><div class="line"></div><div class="line">子类中     ok         ok </div><div class="line"></div><div class="line"></div><div class="line">不同包中   ok</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/06/test/jmockit/Unit-Test-JMockit-What-are-the-differences-between-Mocked-and-Injectable-in-JMockit-and-when-to-use-Injectable-rather-than-Mocked/" itemprop="url">
                  Unit Test - JMockit - What are the differences between @Mocked and @Injectable in JMockit, and when to use @Injectable rather than @Mocked
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-06T21:34:00+08:00" content="2016-04-06">
              2016-04-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/test/" itemprop="url" rel="index">
                    <span itemprop="name">test</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/test/jmockit/" itemprop="url" rel="index">
                    <span itemprop="name">jmockit</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/06/test/jmockit/Unit-Test-JMockit-What-are-the-differences-between-Mocked-and-Injectable-in-JMockit-and-when-to-use-Injectable-rather-than-Mocked/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/06/test/jmockit/Unit-Test-JMockit-What-are-the-differences-between-Mocked-and-Injectable-in-JMockit-and-when-to-use-Injectable-rather-than-Mocked/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>Recently, an engineer from my company sent out an email encouraging devs to use more <code>@Injectable</code> not <code>@Mocked</code>. He gave some examples demonstrating that <code>@Mocked</code> will mock more things than we expect, like class constructors. Personally, I usually just use <code>@Mocked</code>. I read about the differences between <code>@Injectable</code> and <code>@Mocked</code> before from JMockit official doc, but didn’t fully get what they are exactly about. So I kept his remindings in mind. Today, when I worked on some java unit tests, I tried <code>@Injectable</code> (normally I just use <code>@Mocked</code>), and while writing a few tests I think I understand much deeper about what the differences between them are and what the scenarios to apply one of them.</p>
<p>In one sentence, <code>@Mocked</code> will mock everything and all instances of that class, and <code>@Injectable</code> will only mock a specific method/field of one instance of that class.</p>
<p>Let’s understand this better by discussing about when to use one rather than the other. I summarized some principles from my own experience:</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/04/06/test/jmockit/Unit-Test-JMockit-What-are-the-differences-between-Mocked-and-Injectable-in-JMockit-and-when-to-use-Injectable-rather-than-Mocked/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/03/java/concurrency/Java-Concurrency-Executor-and-Thread-Pools/" itemprop="url">
                  Java Concurrency - Executor and Thread Pools
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-03T23:56:13+08:00" content="2016-04-03">
              2016-04-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/concurrency/" itemprop="url" rel="index">
                    <span itemprop="name">concurrency</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/03/java/concurrency/Java-Concurrency-Executor-and-Thread-Pools/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/03/java/concurrency/Java-Concurrency-Executor-and-Thread-Pools/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Executor-Interfaces"><a href="#Executor-Interfaces" class="headerlink" title="Executor Interfaces"></a>Executor Interfaces</h1><p>The <code>java.util.concurrent</code> package defines <code>three executor interfaces</code>to <code>provide us the basic interface for a thread pool</code>:</p>
<ul>
<li><code>Executor</code>, a simple interface that supports launching new tasks.</li>
<li><code>ExecutorService</code>, a subinterface of <code>Executor</code>, which adds features that help manage the lifecycle, both of the individual tasks and of the executor itself.</li>
<li><code>ScheduledExecutorService</code>, a subinterface of <code>ExecutorService</code>, supports future and/or periodic execution of tasks.</li>
</ul>
<p>Typically, variables that refer to executor objects are declared as one of these three interface types, not with an executor class type. </p>
<h2 id="The-Executor-Interface"><a href="#The-Executor-Interface" class="headerlink" title="The Executor Interface"></a>The Executor Interface</h2><p>Provides a single method, <code>execute</code>, designed to be a drop-in replacement for a common thread-creation idiom. If <code>r</code> is <code>a Runnable object</code>, and <code>e</code> is <code>an Executor object</code> you can replace<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(new Thread(r)).start();</div></pre></td></tr></table></figure></p>
<p>with<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">e.execute(r);</div></pre></td></tr></table></figure></p>
<p>However, the definition of execute is less specific. The low-level idiom creates a new thread and launches it immediately. Depending on the Executor implementation, execute may do the same thing, but is more likely to use an existing worker thread to run r, or to place r in a queue to wait for a worker thread to become available. (We’ll describe worker threads in the section on Thread Pools.)</p>
<p>The executor implementations in java.util.concurrent are designed to make full use of the more advanced <code>ExecutorService</code> and <code>ScheduledExecutorService</code> interfaces, although they also work with the base Executor interface.</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/04/03/java/concurrency/Java-Concurrency-Executor-and-Thread-Pools/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/03/java/concurrency/Java-Concurrency-java-util-concurrent-atomic-package/" itemprop="url">
                  Java Concurrency - java.util.concurrent.atomic package
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-03T23:55:46+08:00" content="2016-04-03">
              2016-04-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/concurrency/" itemprop="url" rel="index">
                    <span itemprop="name">concurrency</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/03/java/concurrency/Java-Concurrency-java-util-concurrent-atomic-package/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/03/java/concurrency/Java-Concurrency-java-util-concurrent-atomic-package/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="package-java-util-concurrent-atomic"><a href="#package-java-util-concurrent-atomic" class="headerlink" title="package java.util.concurrent.atomic"></a>package java.util.concurrent.atomic</h1><h2 id="volatile-keyword-in-Java"><a href="#volatile-keyword-in-Java" class="headerlink" title="volatile keyword in Java"></a>volatile keyword in Java</h2><p>Essentially, <code>volatile</code> is used to indicate that <code>a variable&#39;s value will be modified by different threads</code>.</p>
<p>Declaring a volatile Java variable means:</p>
<blockquote>
<ul>
<li>The value of this variable will <code>never be cached thread-locally</code>: all reads and writes will go straight to “main memory”</li>
<li>Access to the variable <code>acts as though it is enclosed in a synchronized block</code>, synchronized on itself</li>
</ul>
</blockquote>
<p><code>Static variables</code> are used in the context of Object where update made by one object would reflect in all the other objects of the same class but not in the context of Thread where update of one thread to the static variable will reflect the changes immediately to all the threads (in their local cache).</p>
<p><code>Volatile variable</code>: If two Threads(suppose t1 and t2) are accessing the same object and updating a variable which is declared as volatile then it means t1 and t2 can make their own local cache of the Object except the variable which is declared as a volatile . So the volatile variable will have only one main copy which will be updated by different threads and update made by one thread to the volatile variable will immediately reflect to the other Thread.</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/04/03/java/concurrency/Java-Concurrency-java-util-concurrent-atomic-package/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/03/java/concurrency/Java-Concurrency-CountDownLatch/" itemprop="url">
                  Java Concurrency - CountDownLatch
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-03T23:51:49+08:00" content="2016-04-03">
              2016-04-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/concurrency/" itemprop="url" rel="index">
                    <span itemprop="name">concurrency</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/03/java/concurrency/Java-Concurrency-CountDownLatch/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/03/java/concurrency/Java-Concurrency-CountDownLatch/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>#java.util.concurrent.CountDownLatch – a more general wait/notify mechanism</p>
<blockquote>
<p>A synchronization aid that allows one or more threads to wait until a<br>set of operations being performed in other threads completes.</p>
</blockquote>
<p>A <code>CountDownLatch</code> is <code>initialized with a given count</code>. </p>
<blockquote>
<p>The await methods block until the current count reaches zero due to<br>invocations of the countDown() method, after which all waiting threads<br>are released and any subsequent invocations of await return<br>immediately.</p>
</blockquote>
<p> This is a one-shot phenomenon – the count cannot be reset. If you need a version that resets the count, consider using a <code>CyclicBarrier</code>.</p>
<p>A CountDownLatch is a versatile synchronization tool and can be used for a number of purposes. </p>
<ul>
<li>A CountDownLatch initialized with a count of one serves as a simple on/off latch, or gate: all threads invoking await wait at the gate until it is opened by a thread invoking countDown().</li>
<li>A CountDownLatch initialized to N can be used to make one thread wait until N threads have completed some action, or some action has been completed N times.</li>
</ul>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/04/03/java/concurrency/Java-Concurrency-CountDownLatch/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/03/java/concurrency/Java-Concurrency-Semaphore/" itemprop="url">
                  Java Concurrency - Semaphore
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-03T23:51:31+08:00" content="2016-04-03">
              2016-04-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/concurrency/" itemprop="url" rel="index">
                    <span itemprop="name">concurrency</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/03/java/concurrency/Java-Concurrency-Semaphore/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/03/java/concurrency/Java-Concurrency-Semaphore/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="java-util-concurrent-Semaphore"><a href="#java-util-concurrent-Semaphore" class="headerlink" title="java.util.concurrent.Semaphore"></a>java.util.concurrent.Semaphore</h1><p>A <code>Semaphore</code> is a thread synchronization construct that can be used either <code>to send signals between threads to avoid missed signals</code>, or <code>to guard a critical section like you would with a lock</code>.</p>
<p>A counting semaphore. Conceptually, a semaphore maintains <code>a set of permits</code>, or <code>a given number of &quot;permits&quot;</code>, with the following characteristics.</p>
<blockquote>
<ul>
<li>For each call to <code>acquire()</code>, a permit is taken by the calling thread. </li>
<li>For each call to <code>release()</code>, a permit is returned to the semaphore. </li>
<li>Thus, at most N threads can pass the <code>acquire()</code> method without any <code>release()</code> calls, where N is the number of permits the semaphore was initialized with. </li>
<li>Each <code>acquire()</code> blocks if necessary until a permit is available, and then takes it. </li>
<li>Each <code>release()</code> adds a permit, potentially releasing a blocking acquirer. </li>
</ul>
<p>It safely allows us to ensure that only n processes can access a certain resource at a given time.</p>
</blockquote>
<p>However, no actual permit objects are used; the <code>Semaphore</code> just keeps a count of the number available and acts accordingly. The permits are just a simple counter. Nothing fancy here.</p>
<h1 id="Semaphore-Classification"><a href="#Semaphore-Classification" class="headerlink" title="Semaphore Classification"></a>Semaphore Classification</h1><p>The semaphores in computer science can be broadly classified as :</p>
<blockquote>
<ul>
<li>Binary Semaphore</li>
<li>Counting Semaphore</li>
</ul>
</blockquote>
<p><code>A semaphore initialized to one (1)</code>, and which is used such that it only has at most one permit available, <code>can serve as a mutual exclusion lock</code>. This is more commonly known as a <code>binary semaphore</code>, because it only has two states: one permit available, or zero permits available. When used in this way, <code>the binary semaphore has the property</code> (unlike many Lock implementations), <code>that the &quot;lock&quot; can be released by a thread other than the owner</code> <code>(as semaphores have no notion of ownership)</code>. <code>This can be useful in some specialized contexts, such as deadlock recovery</code>.</p>
<h1 id="Build-a-simple-Semaphore"><a href="#Build-a-simple-Semaphore" class="headerlink" title="Build a simple Semaphore"></a>Build a simple Semaphore</h1><p>Here is a simple Semaphore implementation:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Semaphore</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> signal = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">acquire</span><span class="params">()</span> </span>&#123;</div><div class="line">		signal = <span class="keyword">true</span>;</div><div class="line">		notify();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</div><div class="line">		<span class="keyword">while</span>(!signal) &#123;</div><div class="line">			wait();</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		signal = <span class="keyword">false</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>The <code>acquire()</code> method sends a signal which is stored internally in the <code>Semaphore</code>. The <code>release()</code> method waits for a signal. When received the signal flag is cleared again, and the <code>release()</code> method exited.</p>
</blockquote>
<p>Using a semaphore like this you can avoid missed signals. You will call <code>acquire()</code> instead of <code>notify()</code> and <code>release()</code> instead of <code>wait()</code>. If the call to <code>acquire()</code> happens before the call to <code>release()</code> the thread calling <code>release()</code> will still know that <code>acquire()</code> was called, because the signal is stored internally in the signal variable. This is not the case with <code>wait()</code> and <code>notify()</code>.</p>
<p>The names <code>acquire()</code> and <code>release()</code> may seem a bit odd when using a semaphore for signaling. The names origin from the use of semaphores as locks, as explained later in this text. In that case the names make more sense.</p>
<h1 id="Building-a-Counting-Semaphore"><a href="#Building-a-Counting-Semaphore" class="headerlink" title="Building a Counting Semaphore"></a>Building a Counting Semaphore</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountingSemaphore</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> signals = <span class="number">0</span>;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">take</span><span class="params">()</span> </span>&#123;</div><div class="line">		signals++;</div><div class="line">		notify();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</div><div class="line">		<span class="keyword">while</span>(signals == <span class="number">0</span>) &#123;</div><div class="line">			wait();</div><div class="line">		&#125;</div><div class="line">		signals--;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Building-a-Bounded-Semaphore"><a href="#Building-a-Bounded-Semaphore" class="headerlink" title="Building a Bounded Semaphore"></a>Building a Bounded Semaphore</h1><p>The <code>CoutingSemaphore</code> has no upper bound on how many signals it can store. We can change the semaphore implementation to have an upper bound, like this:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBoundedSemaphore</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> signal;</div><div class="line">    <span class="keyword">int</span> capacity;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyBoundedSemaphore</span><span class="params">(<span class="keyword">int</span> cap)</span> </span>&#123;</div><div class="line">        signal = <span class="number">0</span>;</div><div class="line">        capacity = cap;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/*</div><div class="line">    * Notice how the acquire() method now blocks if the number of signals is equal to the upper bound.</div><div class="line">    *</div><div class="line">    * Not until a thread has called release() will the thread calling take() be allowed to deliver its signal,</div><div class="line">    * if the BoundedSemaphore has reached its upper signal limit.</div><div class="line">    * </div><div class="line">    * If the queue size is not equal to either bound when enqueue() or dequeue() is called,</div><div class="line">    * there can be no threads waiting to either enqueue or dequeue items.</div><div class="line">    * */</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">acquire</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">        <span class="keyword">while</span>(signal == capacity) &#123;</div><div class="line">            wait();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(signal == <span class="number">0</span>) &#123;</div><div class="line">            notifyAll();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        signal ++;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">        <span class="keyword">while</span>(signal == <span class="number">0</span>) &#123;</div><div class="line">            wait();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(signal == capacity) &#123;</div><div class="line">            notifyAll();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        signal --;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Notice how the <code>take()</code> method now blocks if the number of signals is equal to the upper bound. Not until a thread has called <code>release()</code> will the thread calling <code>take()</code> be allowed to deliver its signal, if the <code>BoundedSemaphore</code> has reached its upper signal limit.</p>
<h2 id="Interview"><a href="#Interview" class="headerlink" title="Interview"></a>Interview</h2><p>I had one interview that requires to build a Semaphore class with the following primitives</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Semaphore</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span> </span>&#123;</div><div class="line">	</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decrement</span><span class="params">()</span> </span>&#123;</div><div class="line">	</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Semaphore</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> counter;</div><div class="line">	<span class="keyword">private</span> ILock lock;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Semaphore</span><span class="params">(<span class="keyword">int</span> v)</span> </span>&#123;</div><div class="line">		counter = v;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span> </span>&#123;</div><div class="line">		lock.enter();</div><div class="line">		</div><div class="line">		lock.leave();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decrement</span><span class="params">()</span> </span>&#123;</div><div class="line">		lock.enter();</div><div class="line">		</div><div class="line">		lock.leave();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Here is a simple Semaphore implementation:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class ILock &#123;</div><div class="line">	enter();</div><div class="line">	leave();</div><div class="line">&#125;</div><div class="line"></div><div class="line">class IEvent &#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">class IMutex &#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/04/03/java/concurrency/Java-Concurrency-Semaphore/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/03/spring/Spring-Spring-configuration-styles/" itemprop="url">
                  Spring - Spring configuration styles
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-03T23:37:39+08:00" content="2016-04-03">
              2016-04-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/spring/" itemprop="url" rel="index">
                    <span itemprop="name">spring</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/03/spring/Spring-Spring-configuration-styles/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/03/spring/Spring-Spring-configuration-styles/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>JavaConfig can be used in conjunction with any or all of Spring’s other container configuration approaches.</p>
<h2 id="6-1-JavaConfig-and-XML"><a href="#6-1-JavaConfig-and-XML" class="headerlink" title="6.1. JavaConfig and XML"></a>6.1. JavaConfig and XML</h2><h3 id="6-1-1-Bootstrapping-JavaConfig-from-XML-with-ConfigurationPostProcessor"><a href="#6-1-1-Bootstrapping-JavaConfig-from-XML-with-ConfigurationPostProcessor" class="headerlink" title="6.1.1.  Bootstrapping JavaConfig from XML with ConfigurationPostProcessor"></a>6.1.1.  Bootstrapping JavaConfig from XML with ConfigurationPostProcessor</h3><p>You may desire or be required to use XML as the primary mechanism for configuring the container, but wish to selectively use @Configuration classes to define certain beans. For such cases, JavaConfig provides ConfigurationPostProcessor, a Spring BeanPostProcessor capable of processing @Configuration classes.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- first, define your individual @Configuration classes as beans --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.myapp.config.AppConfig"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.myapp.config.DataConfig"</span>/&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- be sure to include the JavaConfig bean post-processor --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.config.java.process.ConfigurationPostProcessor"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Then, bootstrap an XML ApplicationContext:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"application-config.xml"</span>);</div></pre></td></tr></table></figure>
<p>The beans defined in AppConfig and DataConfig will be available via context.</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/04/03/spring/Spring-Spring-configuration-styles/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/30/best practices/design pattern/Enum-and-EnumSet/" itemprop="url">
                  Design Pattern - Enum and EnumSet
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-30T22:33:41+08:00" content="2016-03-30">
              2016-03-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/" itemprop="url" rel="index">
                    <span itemprop="name">best practice</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/30/best practices/design pattern/Enum-and-EnumSet/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/03/30/best practices/design pattern/Enum-and-EnumSet/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Enum"><a href="#Enum" class="headerlink" title="Enum"></a>Enum</h1><h2 id="Enum-with-Single-Value"><a href="#Enum-with-Single-Value" class="headerlink" title="Enum with Single Value"></a>Enum with Single Value</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> ScheduleType &#123;</div><div class="line">    Hourly(<span class="number">0</span>), Daily(<span class="number">1</span>), Weekly(<span class="number">2</span>), Monthly(<span class="number">3</span>);</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> m_type;</div><div class="line"></div><div class="line">    ScheduleType(<span class="keyword">int</span> type) &#123;</div><div class="line">        m_type = type;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getType</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> m_type;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">ScheduleType s = ScheduleType.Daily;</div><div class="line">System.out.println(s.getType()); <span class="comment">// 1</span></div><div class="line">System.out.println(s.name());    <span class="comment">// Daily</span></div><div class="line"></div><div class="line"><span class="comment">// ### Create enum from ordinal ###</span></div><div class="line">ScheduledAction s = ScheduledAction.values()[<span class="number">1</span>];</div><div class="line"></div><div class="line"><span class="comment">// ### Create enum from String ###</span></div><div class="line">s = ScheduleType.valueOf(<span class="string">"Hourly"</span>);</div></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/03/30/best practices/design pattern/Enum-and-EnumSet/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/30/best practices/design pattern/Design-Pattern-Factory-Pattern/" itemprop="url">
                  Design Pattern - Factory Pattern
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-30T22:31:20+08:00" content="2016-03-30">
              2016-03-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/" itemprop="url" rel="index">
                    <span itemprop="name">best practice</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/30/best practices/design pattern/Design-Pattern-Factory-Pattern/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/03/30/best practices/design pattern/Design-Pattern-Factory-Pattern/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="Use-Scenario"><a href="#Use-Scenario" class="headerlink" title="Use Scenario:"></a>Use Scenario:</h2><ul>
<li>When you want to create objects implementing some interface, or having the same parent</li>
<li>Creating an object is complex, e.g. lots of constructor parameters</li>
<li><p>Possible to simplify choice of objects</p>
</li>
<li><p>If object creation code is spread in whole application, and if you need to change the process of object creation then you need to go in each and every place to make necessary changes. After finishing this article, while writing your application, consider using factory pattern.</p>
</li>
</ul>
<h3 id="E-g-1"><a href="#E-g-1" class="headerlink" title="E.g. 1"></a>E.g. 1</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Interface</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Animal</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">speak</span><span class="params">()</span></span>;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</div><div class="line">* Imagine that this class requires lots of </div><div class="line">* configuration before use, e.g. via constructor parameters</div><div class="line">*/</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">implements</span> <span class="title">Animal</span> <span class="keyword">extends</span> <span class="title">AbstractAnimal</span></span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">speak</span><span class="params">()</span></span>&#123;</div><div class="line">        System.out.println(<span class="string">"cat"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">implements</span> <span class="title">Animal</span> <span class="keyword">extends</span> <span class="title">AbstractAnimal</span></span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">speak</span><span class="params">()</span></span>&#123;</div><div class="line">        System.out.println(<span class="string">"dog"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/03/30/best practices/design pattern/Design-Pattern-Factory-Pattern/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/30/best practices/design pattern/Design-Pattern-Abstract-Factory-Pattern/" itemprop="url">
                  Design Pattern - Abstract Factory Pattern
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-30T22:29:10+08:00" content="2016-03-30">
              2016-03-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/" itemprop="url" rel="index">
                    <span itemprop="name">best practice</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/30/best practices/design pattern/Design-Pattern-Abstract-Factory-Pattern/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/03/30/best practices/design pattern/Design-Pattern-Abstract-Factory-Pattern/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>Abstract Factory patterns work around  <code>a super-factory which creates other factories</code>. This factory is also called as <code>factory of factories</code>. This type of design pattern comes under creational pattern as this pattern provides one of the best ways to create an object.</p>
<p>In Abstract Factory pattern, <code>an interface is responsible for creating a factory of related objects without explicitly specifying their classes</code>. Each generated factory can give the objects as per the Factory pattern.</p>
<h3 id="E-g-1"><a href="#E-g-1" class="headerlink" title="E.g. 1"></a>E.g. 1</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Shape</span> </span>&#123;</div><div class="line">   <span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</div><div class="line">      System.out.println(<span class="string">"Inside Rectangle::draw() method."</span>);</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</div><div class="line">      System.out.println(<span class="string">"Inside Square::draw() method."</span>);</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</div><div class="line">      System.out.println(<span class="string">"Inside Circle::draw() method."</span>);</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/03/30/best practices/design pattern/Design-Pattern-Abstract-Factory-Pattern/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/30/best practices/design pattern/Design-Pattern-Builder-Pattern/" itemprop="url">
                  Design Pattern - Builder Pattern
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-30T22:27:04+08:00" content="2016-03-30">
              2016-03-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/" itemprop="url" rel="index">
                    <span itemprop="name">best practice</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/best-practice/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/30/best practices/design pattern/Design-Pattern-Builder-Pattern/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/03/30/best practices/design pattern/Design-Pattern-Builder-Pattern/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>The builder pattern is an object creation software design pattern. </p>
<blockquote>
<p>Unlike the <code>abstract factory pattern</code> and the <code>factory method pattern</code> whose intention is to enable polymorphism, the intention of the builder pattern is to </p>
<ul>
<li>find a solution to the telescoping constructor anti-pattern</li>
<li>separate the construction of a complex object from its representation. </li>
</ul>
<p>By doing so the same construction process can create different representations.</p>
<p>The <code>telescoping constructor anti-pattern</code> occurs when the increase of object constructor parameter combination leads to an exponential list of constructors. Instead of using numerous constructors, the builder pattern uses another object, a builder, that receives each initialization parameter step by step and then returns the resulting constructed object at once.</p>
</blockquote>
<p>The builder pattern has another benefit. It can be used for objects that contain flat data (html code, SQL query, X.509 certificate…), that is to say, data that can’t be easily edited. This type of data cannot be edited step by step and must be edited at once. The best way to construct such an object is to use a builder class.</p>
<p>Builder often builds a Composite. Often, designs start out using Factory Method (less complicated, more customizable, subclasses proliferate) and evolve toward Abstract Factory, Prototype, or Builder (more flexible, more complex) as the designer discovers where more flexibility is needed. Sometimes creational patterns are complementary: Builder can use one of the other patterns to implement which components are built. Builders are good candidates for a fluent interface.</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/03/30/best practices/design pattern/Design-Pattern-Builder-Pattern/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/30/java/guava/Guava-Cache/" itemprop="url">
                  Guava - Cache
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-30T15:47:22+08:00" content="2016-03-30">
              2016-03-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/guava/" itemprop="url" rel="index">
                    <span itemprop="name">guava</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/30/java/guava/Guava-Cache/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/03/30/java/guava/Guava-Cache/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Google-Guava"><a href="#Google-Guava" class="headerlink" title="Google Guava"></a><a href="https://github.com/google/guava/wiki/CachesExplained">Google Guava</a></h1><ol>
<li>Cache Heating<ul>
<li><code>Pre-loading</code> v.s. <code>Non-loading</code></li>
</ul>
</li>
<li>Concurrency<ul>
<li>Lock striping (a couple of locks for different key segments)</li>
<li>ReadWriteLock</li>
</ul>
</li>
<li>Weak keys<ul>
<li>What if the cache keys are transient objects (e.g. requests), which don’t belong in the cache if there are no other references elsewhere?</li>
<li>Allow the garbage collector to immediately collect cache keys when other references are gone</li>
</ul>
</li>
<li>Eviction<ul>
<li>Passive<ul>
<li>cache max size</li>
<li>cache max weight</li>
</ul>
</li>
<li>Active<ul>
<li>time to idle - expireAfterAccess()</li>
<li>time to live - expireAfterWrite()</li>
</ul>
</li>
<li>Order<ul>
<li>LRU (Least Recently Used Cache)<ul>
<li>HashMap + DoublyLinkedList</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Two layer caching (L1 + L2 cache)</li>
<li>Cache statistics &amp; performance tuning<ul>
<li>Enable cache runtime configuration<ul>
<li>change max size/weight</li>
</ul>
</li>
<li>Statistics<ul>
<li>Hit rate/ hit count</li>
<li>Miss rate/ miss count</li>
<li>Load exception count</li>
<li>Load success count</li>
<li>Average load penalty</li>
<li>Total load time</li>
</ul>
</li>
</ul>
</li>
<li>RemovalNotification<ul>
<li>Sometimes cached entries are associated with resources which need to be closed or cleaned up</li>
</ul>
</li>
<li>Refresh<ul>
<li><code>Automatic Refresh</code> v.s. <code>Passive Visit-triggered Refresh</code></li>
<li><code>Asynchronized</code> v.s. <code>Synchronized</code></li>
<li><code>Bulk Operation</code> v.s. <code>Single entry</code></li>
</ul>
</li>
<li>Snapshot &amp; iterating<ul>
<li>cache changes dynamically</li>
<li>define asMap() to make a snapshot</li>
</ul>
</li>
</ol>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/03/30/java/guava/Guava-Cache/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/avatar/avatar.jpg"
               alt="Bowen" />
          <p class="site-author-name" itemprop="name">Bowen</p>
          <p class="site-description motion-element" itemprop="description">keep learning - learning notes and blogs</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">102</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">46</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">249</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bowen</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'bowensgithubblog';
      var disqus_identifier = 'page/4/index.html';
      var disqus_title = "";
      var disqus_url = '';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
    </script>
  




  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

</body>
</html>
