<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="oISntcv5wYv-gFzCbOejeG4TxriAsyU0TghcNXvJUUw" />



  <meta name="baidu-site-verification" content="Ydbs8NMx8X" />







  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="test,Injectable,Injectable annotation,Mocked,Mocked annotation,JMockit,JUnit,test framework," />





  <link rel="alternate" href="/atom.xml" title="Bowen's blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Recently, an engineer from my company sent out an email encouraging devs to use more @Injectable not @Mocked. He gave some examples demonstrating that @Mocked will mock more things than we expect, lik">
<meta property="og:type" content="article">
<meta property="og:title" content="Unit Test - JMockit - What are the differences between @Mocked and @Injectable in JMockit, and when to use @Injectable rather than @Mocked">
<meta property="og:url" content="https://phoenixjiangnan.github.io/2016/04/06/test/jmockit/Unit-Test-JMockit-What-are-the-differences-between-Mocked-and-Injectable-in-JMockit-and-when-to-use-Injectable-rather-than-Mocked/index.html">
<meta property="og:site_name" content="Bowen's blog">
<meta property="og:description" content="Recently, an engineer from my company sent out an email encouraging devs to use more @Injectable not @Mocked. He gave some examples demonstrating that @Mocked will mock more things than we expect, lik">
<meta property="og:updated_time" content="2016-07-10T06:16:13.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Unit Test - JMockit - What are the differences between @Mocked and @Injectable in JMockit, and when to use @Injectable rather than @Mocked">
<meta name="twitter:description" content="Recently, an engineer from my company sent out an email encouraging devs to use more @Injectable not @Mocked. He gave some examples demonstrating that @Mocked will mock more things than we expect, lik">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="https://phoenixjiangnan.github.io/2016/04/06/test/jmockit/Unit-Test-JMockit-What-are-the-differences-between-Mocked-and-Injectable-in-JMockit-and-when-to-use-Injectable-rather-than-Mocked/"/>

  <title> Unit Test - JMockit - What are the differences between @Mocked and @Injectable in JMockit, and when to use @Injectable rather than @Mocked | Bowen's blog </title>

  <script type='text/javascript'>
    var _vds = _vds || [];
    window._vds = _vds;
    (function(){
      _vds.push(['setAccountId', 'a6c23d16341d6115']);
      (function() {
        var vds = document.createElement('script');
        vds.type='text/javascript';
        vds.async = true;
        vds.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'dn-growing.qbox.me/vds.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(vds, s);
      })();
    })();
  </script>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Bowen's blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">keep learning - learning notes and blogs</p>
</div>



<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Unit Test - JMockit - What are the differences between @Mocked and @Injectable in JMockit, and when to use @Injectable rather than @Mocked
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-06T21:34:00+08:00" content="2016-04-06">
              2016-04-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/test/" itemprop="url" rel="index">
                    <span itemprop="name">test</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/test/jmockit/" itemprop="url" rel="index">
                    <span itemprop="name">jmockit</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/06/test/jmockit/Unit-Test-JMockit-What-are-the-differences-between-Mocked-and-Injectable-in-JMockit-and-when-to-use-Injectable-rather-than-Mocked/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/04/06/test/jmockit/Unit-Test-JMockit-What-are-the-differences-between-Mocked-and-Injectable-in-JMockit-and-when-to-use-Injectable-rather-than-Mocked/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Recently, an engineer from my company sent out an email encouraging devs to use more <code>@Injectable</code> not <code>@Mocked</code>. He gave some examples demonstrating that <code>@Mocked</code> will mock more things than we expect, like class constructors. Personally, I usually just use <code>@Mocked</code>. I read about the differences between <code>@Injectable</code> and <code>@Mocked</code> before from JMockit official doc, but didn’t fully get what they are exactly about. So I kept his remindings in mind. Today, when I worked on some java unit tests, I tried <code>@Injectable</code> (normally I just use <code>@Mocked</code>), and while writing a few tests I think I understand much deeper about what the differences between them are and what the scenarios to apply one of them.</p>
<p>In one sentence, <code>@Mocked</code> will mock everything and all instances of that class, and <code>@Injectable</code> will only mock a specific method/field of one instance of that class.</p>
<p>Let’s understand this better by discussing about when to use one rather than the other. I summarized some principles from my own experience:</p>
<a id="more"></a>
<blockquote>
<ul>
<li>Mark an instance <code>@Injectable</code> when you CAN pass that instance to the class that you want to actually test</li>
<li>Mark an instance/class <code>@Mocked</code> when you CANNOT pass that instance to the class that you want to actually test</li>
</ul>
</blockquote>
<p>For example, we have a class named <code>Team</code> that we want to test, and it’s like this<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Team</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Team</span><span class="params">(Leader leader)</span> </span>&#123;</div><div class="line">        <span class="comment">//...</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasADiscussion</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(leader.getName());</div><div class="line">        Discussion d = <span class="keyword">new</span> Discussion();</div><div class="line">        <span class="keyword">return</span> d.started();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>In this case, <code>Leader</code> is an instance that you can pass to the class that you want to actually test (class <code>Team</code>), and <code>Discussion</code> is an instance that you cannot pass to <code>Team</code> because <code>Discussion</code> is created within <code>hasADiscussion()</code> method.</p>
<p>So how should we use @Mocked and @Injectable correctly for the unit test with the right mocking scope? The unit test should look like this:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeamTests</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Injectable</span> Leader aLeader;</div><div class="line">    <span class="comment">/**</span></div><div class="line">		* Usually you will write `<span class="doctag">@Mocked</span> Leader aLeader`, which is fine in most </div><div class="line">		* cases but you will hit hidden issues when mocking too much than what you need</div><div class="line">		*/</div><div class="line">    <span class="meta">@Mocked</span> Discussion aDiscussion;</div><div class="line">    </div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testHasADiscussion</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">new</span> NonStrictExpectations() &#123;&#123;</div><div class="line">            aLeader.getName(); result = <span class="string">"dev_leader"</span>;</div><div class="line">            aDiscussion.start(); result = <span class="keyword">true</span>;</div><div class="line">        &#125;&#125;;</div><div class="line">        </div><div class="line">        Team t = <span class="keyword">new</span> Team(aLeader); <span class="comment">// Note! You can pass in `aLeader` (but not aDiscussion) to `Team` here!</span></div><div class="line">        assertTrue(t.hasADiscussion());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>See what I mean by “it depends on whether you can pass in the instance/class or not”!</p>
<p>The scope of mocking objects are already ok here, much better that mocking the entire <code>Leader</code> class. If you really want to make the scope more correct, you can go with<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeamTests</span> </span>&#123;</div><div class="line">    <span class="meta">@Injectable</span> Leader aLeader;  <span class="comment">// Usually you will write `@Mocked Leader aLeader`, which is fine in most cases but you will hit hidden issues and don't know why</span></div><div class="line">    </div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testHasADiscussion</span><span class="params">(@Mocked <span class="keyword">final</span> Discussion aDiscussion)</span> </span>&#123;</div><div class="line">        <span class="keyword">new</span> NonStrictExpectations() &#123;&#123;</div><div class="line">            aLeader.getName(); result = <span class="string">"dev_leader"</span>;</div><div class="line">            aDiscussion.start(); result = <span class="keyword">true</span>;</div><div class="line">        &#125;&#125;;</div><div class="line">        </div><div class="line">        Team t = <span class="keyword">new</span> Team(aLeader); <span class="comment">// Note! You can pass in `aLeader` (but not aDiscussion) to `Team` here!</span></div><div class="line">        assertTrue(t.hasADiscussion());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>This way, the scope of mocking <code>Discussion</code> class will not go out of the boundary of <code>testHasADiscussion</code> test.</p>
<p>Things can get trickier if you have some business logic in class <code>Discussion</code> because <code>@Mocked</code>‘s mocking scope is so wide that it will even mock constructors and change constructor’s behaviors. We can discuss this later.</p>
<p>Hope this blog can help you understand what are the best options when considering mocking things in unit test with JMockit!</p>
<hr>
<p>And the following part is copied from JMockit official doc. To be honest, I don’t find it useful until I figured the essence out myself. Because everything it’s talking about it high level ideas without any concrete examples.</p>
<h2 id="Mocked-types-and-instances"><a href="#Mocked-types-and-instances" class="headerlink" title="Mocked types and instances"></a>Mocked types and instances</h2><p><code>Methods</code> and <code>constructors</code> invoked from the unit under test, and which belong to a dependency of said unit, are the usual targets for mocking. </p>
<p>Mocking provides the mechanism that we need in order to isolate the tested unit from (some of) its dependencies. We specify which particular dependencies are to be mocked for a given test (or tests) by declaring suitable <code>mock fields</code> and/or <code>mock parameters</code>; </p>
<ul>
<li><code>mock fields</code> are declared as annotated instance fields of the test class</li>
<li><code>mock parameters</code> are declared as annotated parameters of a test method. </li>
</ul>
<p>The type of the dependency to be mocked will be the type of the mock field or parameter. Such a type can be any kind of reference type: an interface, a class (including abstract and final ones), an annotation, or an enum.</p>
<blockquote>
<p>By default, all methods of the mocked type will be mocked for the duration of the test. <code>If the declared mocked type is a class, then all of its super-classes up to but not including java.lang.Object will also be mocked, recursively.</code> Therefore, inherited methods will automatically be mocked as well. Again in the case of a class, all of its constructors will also get mocked. Even more, whatever Java language modifiers happen to be applied to the methods/constructors of a mocked class, they will still get mocked: private, static, final, native, it doesn’t really matter.</p>
<p>When a method or constructor is mocked, its original implementation code won’t be executed for invocations occurring during the test. Instead, the call will be redirected to JMockit so it can be dealt with in the manner that was explicitly or implicitly specified for the test.</p>
</blockquote>
<p>The following example test skeleton serves as a basic illustration for the declaration of <code>mock fields</code> and <code>mock parameters</code>, as well as the way in which they are typically used in test code. In this tutorial, we use many code snippets like this, where the parts in bold font are the current focus of explanation.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// "Dependency" is mocked for all tests in this test class.</span></div><div class="line"><span class="comment">// The "mockInstance" field holds a mocked instance automatically created for use in each test.</span></div><div class="line"><span class="meta">@Mocked</span> Dependency mockInstance;</div><div class="line"></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doBusinessOperationXyz</span><span class="params">(@Mocked <span class="keyword">final</span> AnotherDependency anotherMock)</span> </span>&#123;</div><div class="line">   <span class="keyword">new</span> Expectations() &#123;&#123; <span class="comment">// an "expectation block"</span></div><div class="line">      <span class="comment">// Record an expectation, with a given value to be returned:</span></div><div class="line">      mockInstance.mockedMethod(...); result = <span class="number">123</span>;</div><div class="line">   &#125;&#125;;</div><div class="line">   </div><div class="line">   <span class="comment">// Call the code under test.</span></div><div class="line">   </div><div class="line">   <span class="keyword">new</span> Verifications() &#123;&#123; <span class="comment">// a "verification block"</span></div><div class="line">      <span class="comment">// Verifies an expected invocation:</span></div><div class="line">      anotherMock.save(any); times = <span class="number">1</span>;</div><div class="line">   &#125;&#125;;</div><div class="line">   ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>For a mock parameter declared in a test method, an instance of the declared type will be automatically created by JMockit and passed by the JUnit/TestNG test runner when it executes the test method; therefore, the parameter value will never be null. For a mock field, an instance of the declared type will be automatically created by JMockit and assigned to the field, provided it’s not final.</p>
<p>There are a few different annotations available for the declaration of mock fields and parameters, and ways in which the default mocking behavior can be modified to suit the needs of a particular test. The basics are: </p>
<ul>
<li><code>@Mocked</code> is the central mocking annotation, having a few optional attributes which are useful in particular situations</li>
<li><code>@Injectable</code> is another mocking annotation, which constrains mocking to the instance methods of a single mocked instance</li>
<li><code>@Capturing</code> is yet another mocking annotation, which extends mocking to the classes implementing a mocked interface, or the subclasses extending a mocked class. </li>
</ul>
<p>When <code>@Injectable</code> or <code>@Capturing</code> is applied to a mock field or mock parameter, <code>@Mocked</code> is implied so it doesn’t need to (but can) be applied as well.</p>
<p>The mocked instances created by JMockit can be used normally in test code (for the recording and verification of expectations), and/or passed to the code under test. Or they may simply go unused. Differently from other mocking APIs, these mocked objects don’t have to be the ones used by the unit under test when it calls instance methods on its dependencies. By default (ie, when <code>@Injectable</code> is not used), JMockit does not care on which object a mocked instance method is called. This allows the transparent mocking of instances created directly inside code under test, when said code invokes constructors on brand new instances using the new operator; the classes instantiated must be covered by mocked types declared in test code, that’s all.</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/test/" rel="tag">#test</a>
          
            <a href="/tags/Injectable/" rel="tag">#Injectable</a>
          
            <a href="/tags/Injectable-annotation/" rel="tag">#Injectable annotation</a>
          
            <a href="/tags/Mocked/" rel="tag">#Mocked</a>
          
            <a href="/tags/Mocked-annotation/" rel="tag">#Mocked annotation</a>
          
            <a href="/tags/JMockit/" rel="tag">#JMockit</a>
          
            <a href="/tags/JUnit/" rel="tag">#JUnit</a>
          
            <a href="/tags/test-framework/" rel="tag">#test framework</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/04/03/java/concurrency/Java-Concurrency-Executor-and-Thread-Pools/" rel="next" title="Java Concurrency - Executor and Thread Pools">
                <i class="fa fa-chevron-left"></i> Java Concurrency - Executor and Thread Pools
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/04/08/java/Java-Java-Basics/" rel="prev" title="Java - Java Basics">
                Java - Java Basics <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/avatar/avatar.jpg"
               alt="Bowen" />
          <p class="site-author-name" itemprop="name">Bowen</p>
          <p class="site-description motion-element" itemprop="description">keep learning - learning notes and blogs</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives/">
              <span class="site-state-item-count">108</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories/">
                <span class="site-state-item-count">49</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags/">
                <span class="site-state-item-count">256</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Mocked-types-and-instances"><span class="nav-number">1.</span> <span class="nav-text">Mocked types and instances</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bowen</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'bowensgithubblog';
      var disqus_identifier = '2016/04/06/test/jmockit/Unit-Test-JMockit-What-are-the-differences-between-Mocked-and-Injectable-in-JMockit-and-when-to-use-Injectable-rather-than-Mocked/';
      var disqus_title = "Unit Test - JMockit - What are the differences between @Mocked and @Injectable in JMockit, and when to use @Injectable rather than @Mocked";
      var disqus_url = 'https://phoenixjiangnan.github.io/2016/04/06/test/jmockit/Unit-Test-JMockit-What-are-the-differences-between-Mocked-and-Injectable-in-JMockit-and-when-to-use-Injectable-rather-than-Mocked/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  




  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

</body>
</html>
