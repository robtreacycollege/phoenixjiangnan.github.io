<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="spring bean wiring," />





  <link rel="alternate" href="/atom.xml" title="Bowen's blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Spring Bean Annotation
@Repository - a bean as DAO Component on persistence layer
@Service - a bean as Service Component on business layer
@Controller - a bean as Controller Component on Presentation">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring - Wiring Beans">
<meta property="og:url" content="https://phoenixjiangnan.github.io/2016/07/09/spring/Spring-Wiring-Beans/index.html">
<meta property="og:site_name" content="Bowen's blog">
<meta property="og:description" content="Spring Bean Annotation
@Repository - a bean as DAO Component on persistence layer
@Service - a bean as Service Component on business layer
@Controller - a bean as Controller Component on Presentation">
<meta property="og:updated_time" content="2016-07-10T06:16:13.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Spring - Wiring Beans">
<meta name="twitter:description" content="Spring Bean Annotation
@Repository - a bean as DAO Component on persistence layer
@Service - a bean as Service Component on business layer
@Controller - a bean as Controller Component on Presentation">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="https://phoenixjiangnan.github.io/2016/07/09/spring/Spring-Wiring-Beans/"/>

  <title> Spring - Wiring Beans | Bowen's blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Bowen's blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">keep learning - learning notes and blogs</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="https://phoenixjiangnan.github.io" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Spring - Wiring Beans
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-09T23:14:21+08:00" content="2016-07-09">
              2016-07-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/spring/" itemprop="url" rel="index">
                    <span itemprop="name">spring</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/09/spring/Spring-Wiring-Beans/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/07/09/spring/Spring-Wiring-Beans/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="Spring-Bean-Annotation"><a href="#Spring-Bean-Annotation" class="headerlink" title="Spring Bean Annotation"></a>Spring Bean Annotation</h2><ul>
<li><code>@Repository</code> - a bean as DAO Component on persistence layer</li>
<li><code>@Service</code> - a bean as Service Component on business layer</li>
<li><code>@Controller</code> - a bean as Controller Component on Presentation layer</li>
<li><code>@Configuration</code> - a bean as Configuration Component.</li>
<li><code>@Component</code> - General purpose annotation, can be used as a replacement for above annotations.</li>
</ul>
<p>In Spring, objects aren’t responsible for finding or creating the other objects that they need to do their jobs. Instead, the container gives them references to the objects that they collaborate with.</p>
<p>The act of creating associations between application objects is <code>the essence of dependency injection (DI)</code> and is commonly referred to as <code>wiring</code>. </p>
<h2 id="Spring’s-configuration-options"><a href="#Spring’s-configuration-options" class="headerlink" title="Spring’s configuration options"></a>Spring’s configuration options</h2><p>Spring offers three primary wiring mechanisms:</p>
<ol>
<li>Implicit bean discovery and automatic wiring</li>
<li>Explicit configuration in Java.</li>
<li>Explicit configuration in XML.</li>
</ol>
<p>The first two options are the most commonly-used ones. I will not talk about XML-based config because it’s old and hard to read and maintain.</p>
<h2 id="1-Automatically-wiring-beans"><a href="#1-Automatically-wiring-beans" class="headerlink" title="1. Automatically wiring beans"></a>1. Automatically wiring beans</h2><p>Springs attacks automatic wiring from two angles:</p>
<blockquote>
<ul>
<li>Component scanning - Spring automatically discovers beans to be created in the application context.</li>
<li>Autowiring - Spring automatically satisfies bean dependencies</li>
</ul>
</blockquote>
<p><code>Working together, component scanning and autowiring can keep explicit configuration to a minimum.</code></p>
<h3 id="1-1-Component-Creating-discoverable-beans"><a href="#1-1-Component-Creating-discoverable-beans" class="headerlink" title="1.1 @Component - Creating discoverable beans"></a>1.1 <code>@Component</code> - Creating discoverable beans</h3><p>Annotation <code>@Component</code> identifies this class as a component class and serves as a clue to Spring that a bean should be created for this class. There is no need to explicitly configure a AnAlbum bean in XML or JavaConfig, Spring will do it for you because this class is annotated with <code>@Component</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CD</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">play</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnAlbum</span> <span class="keyword">implements</span> <span class="title">CD</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> String title = <span class="string">"An album from Scorpions"</span>;</div><div class="line">	</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"Playing "</span> + title);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="1-2-Naming-a-component-scanned-bean"><a href="#1-2-Naming-a-component-scanned-bean" class="headerlink" title="1.2 Naming a component-scanned bean"></a>1.2 Naming a component-scanned bean</h3><p>All beans in a Spring application context are given an <code>id</code>. When you didn’t explicitly give the bean an id, Spring will given it one derived from its class name by <code>lowering the first letter of the class name</code>.</p>
<h4 id="Approach-1"><a href="#Approach-1" class="headerlink" title="Approach 1"></a>Approach 1</h4><p>If you’d rather give the bean a different ID, all you have to do is pass the desired ID as a value to the <code>@Component</code> annotation.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Component</span>(<span class="string">"anotherAlbum"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnAlbum</span> <span class="keyword">implements</span> <span class="title">CD</span> </span>&#123;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Approach-2"><a href="#Approach-2" class="headerlink" title="Approach 2"></a>Approach 2</h4><p>Use <code>@Named</code> annotation</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Named</span>(<span class="string">"anotherAlbum"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnAlbum</span> <span class="keyword">implements</span> <span class="title">CD</span> </span>&#123;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="1-3-ComponentScan-Automatic-component-scan-amp-Setting-a-base-package-for-component-scanning"><a href="#1-3-ComponentScan-Automatic-component-scan-amp-Setting-a-base-package-for-component-scanning" class="headerlink" title="1.3 @ComponentScan - Automatic component scan &amp; Setting a base package for component scanning"></a>1.3 <code>@ComponentScan</code> - Automatic component scan &amp; Setting a base package for component scanning</h3><p>Component scanning isn’t turned on by default. You still need an explicit configuration to tell Spring to seek out classes annotated with <code>@Component</code> and to create beans from them.</p>
<blockquote>
<p>When using <code>@ComponentScan</code> with no attributes, it will default to the configuration class’s package as its base packege to scan for components.</p>
</blockquote>
<h4 id="Style-1"><a href="#Style-1" class="headerlink" title="Style 1"></a>Style 1</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="meta">@ComponentScan</span>(<span class="string">"com.xxx.package_name"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AutomaticWiringConfig</span> </span>&#123;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>In the above example, <code>AutomaticWiringConfig</code> class defines a Spring wiring specification, expressed in Java. It’s annotated with <code>@ComponentScan</code> to enable component scanning in Spring.</p>
<h4 id="Style-2-use-basePackages-attribute"><a href="#Style-2-use-basePackages-attribute" class="headerlink" title="Style 2 - use basePackages attribute"></a>Style 2 - use <code>basePackages</code> attribute</h4><p>If you’d rather it be clear that you’re setting the base package, you can do so with the <code>basePackages</code> attribute</p>
<p>Here’s an example of component scan with multiple package names</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@ComponentScan</span>(&#123;<span class="string">"com.xxx.p1"</span>, <span class="string">"com.xxx.p2"</span>&#125;)</div></pre></td></tr></table></figure>
<p>equals to</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@ComponentScan</span>(basePackages = &#123;<span class="string">"com.xxx.p1"</span>, <span class="string">"com.xxx.p2"</span>&#125;)</div></pre></td></tr></table></figure>
<h4 id="Style-3-Specify-classes-or-interfaces-with-basePackageClasses"><a href="#Style-3-Specify-classes-or-interfaces-with-basePackageClasses" class="headerlink" title="Style 3 - Specify classes or interfaces with basePackageClasses"></a>Style 3 - Specify classes or interfaces with <code>basePackageClasses</code></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="meta">@ComponentScan</span>(basePackageClasses = &#123;CDPlayer.class, DVDPlayer.class&#125;)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AutomaticWiringConfig</span> </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>I personally don’t like component scan very much, because it’s easy to fail since people are always forgetting to explicitly add packages. Besides, settings in the base packages are expressed as String values. If programmers want to refactor the package names, the specified base packages would be wrong.</p>
<p>But component scanning is necessary when the POJO classes that you want to define beans don’t live in the same package as your Spring config class</p>
</blockquote>
<h3 id="1-4-Autowired-Annotating-beans-to-be-automatically-wired"><a href="#1-4-Autowired-Annotating-beans-to-be-automatically-wired" class="headerlink" title="1.4 @Autowired - Annotating beans to be automatically wired"></a>1.4 <code>@Autowired</code> - Annotating beans to be automatically wired</h3><p>Autowiring is a means of letting Spring automatically satisfy a bean’s dependencies by finding other beans in the application context that are a match to the bean’s needs.</p>
<p>Here’s an example in JUnit</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</div><div class="line"><span class="meta">@ContextConfiguration</span>(classes = AutomaticWiringConfig.class)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CDPlayerTest</span> </span>&#123;</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	<span class="keyword">private</span> CD cd;</div><div class="line">	</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cdShouldNotBeNull</span><span class="params">()</span> </span>&#123;</div><div class="line">		assertNotNull(cd);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>CDPlayerTest</code> takes advantage of Spring’s <code>SpringJUnit4ClassRunner</code> to have a Spring application context automatically created when the test starts. The <code>@ContextConfiguration</code> annotation tells it to load its configuration from where. </p>
<blockquote>
<p>Spring will attempt to satisfy the dependency expressed in the method’s parameters, in three typical styles:</p>
<ul>
<li>constructor</li>
<li>setter method</li>
<li>any other method</li>
</ul>
</blockquote>
<p>Assuming that one and only one bean matches, that bean will be wired in!</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MediaPlayer</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">play</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CDPlayer</span> <span class="keyword">implements</span> <span class="title">MediaPlayer</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> CD cd;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 1. The constructor is annotated with <span class="doctag">@Autowired</span>, indicating that when</div><div class="line">	 * Spring creates the CDPlayer bean, it should instantiate it via that </div><div class="line">	 * constructor and pass in a bean that is assignable to CD</div><div class="line">	 * */</div><div class="line">	<span class="meta">@Autowired</span>(required = <span class="keyword">true</span>)</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">CDPlayer</span><span class="params">(CD cd)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.cd =cd;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 2. <span class="doctag">@Autowired</span> can also be used on a property's setter method</div><div class="line">	 * */</div><div class="line">	<span class="meta">@Autowired</span> </div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCD</span><span class="params">(CD cd)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.cd = cd;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 3. <span class="doctag">@Autowired</span> can also be applied to any method on the class</div><div class="line">	 * */</div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertCD</span><span class="params">(CD cd)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.cd = cd;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</div><div class="line">		cd.play();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If there’s no matching beans, Spring will throw an exception as the application context is being created. To avoid that exception, you can set the <code>&#39;required&#39;</code> attribute on <code>@Autowired</code> to <code>false</code> </p>
<h3 id="1-5-Verifying-automatic-configuration"><a href="#1-5-Verifying-automatic-configuration" class="headerlink" title="1.5 Verifying automatic configuration"></a>1.5 Verifying automatic configuration</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</div><div class="line"><span class="meta">@ContextConfiguration</span>(classes = AutomaticWiringConfig.class)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CDPlayerTest</span> </span>&#123;</div><div class="line">	<span class="meta">@Rule</span></div><div class="line">	<span class="keyword">public</span> <span class="keyword">final</span> StandardOutputStreamLog log = <span class="keyword">new</span> StandardOutputStreamLog();</div><div class="line">	</div><div class="line">	<span class="meta">@Autowired</span> <span class="keyword">private</span> MediaPlayer player;</div><div class="line">	<span class="meta">@Autowired</span> <span class="keyword">private</span> CD cd;</div><div class="line">	</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cdShouldNotBeNull</span><span class="params">()</span> </span>&#123;</div><div class="line">		assertNotNull(cd);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">playTest</span><span class="params">()</span> </span>&#123;</div><div class="line">		player.play();</div><div class="line">		assertEquals(<span class="string">"Playing An album from Scorpions."</span>, log.getLog());</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="2-Wiring-beans-with-JavaConfig"><a href="#2-Wiring-beans-with-JavaConfig" class="headerlink" title="2. Wiring beans with JavaConfig"></a>2. Wiring beans with JavaConfig</h2><p>Although Spring configuration with component scanning and autowiring is preferred, there are times when automatic configuration isn’t an option and you must configure Spring explicitly.</p>
<blockquote>
<p>E.g. wiring components from some third-party library into the application. You don’t have the source code for that library, thus you cannot annotate its classes with <code>@Component</code> and <code>@Autowired</code>.</p>
</blockquote>
<p>In that case, you must turn to explicit configuration. You have two choices for explicit configuration: <code>Java</code> and <code>XML</code>. <code>JavaConfig</code> is the preferred option for explicit configuration because it’s more powerful, type-safe, and refactor-friendly</p>
<p>JavaConfig code isn’t just any other Java code. It’s conceptually set apart from the business logic and domain code in your application. <code>JavaConfig is configuration code.</code> This means it shouldn’t contain any business log, nor should JavaConfig invade any code where business logic resides. </p>
<p>JavaConfig is often set apart in a separate package from the rest of an application’s logic so there’s no confusion as to its purpose.</p>
<h3 id="2-1-Creating-a-configuration-class-with-Configuration-and-Bean"><a href="#2-1-Creating-a-configuration-class-with-Configuration-and-Bean" class="headerlink" title="2.1 Creating a configuration class with @Configuration and @Bean"></a>2.1 Creating a configuration class with <code>@Configuration</code> and <code>@Bean</code></h3><p><code>@Bean</code> annotation tells Spring that this method will return an object that should be registered as a bean in the Spring application context. The body contains logic that ultimately results in the creation of the bean instance</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaConfig</span> </span>&#123;</div><div class="line">	<span class="meta">@Bean</span> <span class="comment">// this bean's id is `cd`</span></div><div class="line">	<span class="function"><span class="keyword">public</span> CD <span class="title">cD</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> AnAlbum();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Bean</span>(name = <span class="string">"anotherCd"</span>)  <span class="comment">// this bean's id is `anotherCd`</span></div><div class="line">	<span class="function"><span class="keyword">public</span> CD <span class="title">cD</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> AnAlbum();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Bean</span></div><div class="line">	<span class="function"><span class="keyword">public</span> MediaPlayer <span class="title">mediaPlayer</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> CDPlayer(cD());</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>What’s wrong with the above JavaConfig? Notice that the creation of bean <code>mediaPlayer</code> depends on the creation of bean <code>cd</code> which lives in the same class. How can we improve it?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaConfig</span> </span>&#123;</div><div class="line">	<span class="meta">@Bean</span></div><div class="line">	<span class="function"><span class="keyword">public</span> CD <span class="title">cD</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> AnAlbum();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Bean</span></div><div class="line">	<span class="function"><span class="keyword">public</span> MediaPlayer <span class="title">mediaPlayer</span><span class="params">(CD cd)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> CDPlayer(cd);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The above improved example is a much better choice!! Because it doesn’t depend on the <code>cd</code> bean declared in the same configuration class.</p>
<p>By default, all beans in Spring are singletons, and there’s no reason you need to create a duplicate instance for the second bean. Thus, both above <code>mediaPlayer()</code> method is given the same instance of bean <code>cd</code>.</p>
<h2 id="An-Example-to-close-this-tutorial-Bean-Autowiring-and-Factory-Pattern"><a href="#An-Example-to-close-this-tutorial-Bean-Autowiring-and-Factory-Pattern" class="headerlink" title="An Example to close this tutorial - Bean Autowiring and Factory Pattern"></a>An Example to close this tutorial - Bean Autowiring and Factory Pattern</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Template interface to generate emails for different type of notifications</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IEmailTemplate</span> </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Generate email subject</div><div class="line">     * */</div><div class="line">    <span class="function">String <span class="title">makeSubject</span><span class="params">(List&lt;INotification&gt; notificationList)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Generate email body</div><div class="line">     * */</div><div class="line">    <span class="function">String <span class="title">makeBody</span><span class="params">(List&lt;INotification&gt; notificationList)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GeneralEmailTemplate</span> <span class="keyword">implements</span> <span class="title">IEmailTemplate</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> TimeZone timeZone;</div><div class="line">    <span class="keyword">private</span> Date lastCheckTime;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GeneralEmailTemplate</span><span class="params">(TimeZone timeZone, Date lastCheckTime)</span> </span>&#123;</div><div class="line">        timeZone = timeZone;</div><div class="line">        lastCheckTime = lastCheckTime;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">makeSubject</span><span class="params">(List&lt;INotification&gt; notificationList)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">makeBody</span><span class="params">(List&lt;INotification&gt; notificationList)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerEmailTemplate</span> <span class="keyword">extends</span> <span class="title">GeneralEmailTemplate</span> <span class="keyword">implements</span> <span class="title">IEmailTemplate</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ServerHealthEmailTemplate</span><span class="params">(TimeZone timeZone)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(timeZone, <span class="keyword">new</span> Date());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">makeSubject</span><span class="params">(List&lt;INotification&gt; notificationList)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"server"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">makeBody</span><span class="params">(List&lt;INotification&gt; notificationList)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"server health"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiskSpaceEmailTemplate</span> <span class="keyword">extends</span> <span class="title">GeneralEmailTemplate</span> <span class="keyword">implements</span> <span class="title">IEmailTemplate</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DiskSpaceEmailTemplate</span><span class="params">(TimeZone timeZone)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(timeZone, <span class="keyword">new</span> Date());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">makeSubject</span><span class="params">(List&lt;INotification&gt; notificationList)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"disk"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">makeBody</span><span class="params">(List&lt;INotification&gt; notificationList)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"disk space"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="meta">@ComponentScan</span>(<span class="string">"com.xxx"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmailTemplateFactory</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Bean</span>(name = <span class="string">"ServerHealth"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> IEmailTemplate <span class="title">getServerHealthEmailTemplate</span><span class="params">(TimeZone timeZone)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ServerHealthEmailTemplate(timeZone);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Bean</span>(name = <span class="string">"DiskSpace"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> IEmailTemplate <span class="title">getDiskSpaceEmailTemplate</span><span class="params">(TimeZone timeZone)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DiskSpaceEmailTemplate(timeZone);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@return</span> appropriate email template according to given NotificationType</div><div class="line">     * */</div><div class="line">    <span class="function"><span class="keyword">public</span> IEmailTemplate <span class="title">getEmailTemplate</span><span class="params">(NotificationType notificationType)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>(notificationType == NotificationType.ServerHealth) &#123;</div><div class="line">            <span class="keyword">return</span> getServerHealthEmailTemplate();</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(notificationType == NotificationType.LowDiskSpace) &#123;</div><div class="line">            <span class="keyword">return</span> getLowDiskSpaceEmailTemplate();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> IEmailTemplate() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> String <span class="title">makeSubject</span><span class="params">(List&lt;INotification&gt; notificationList)</span> </span>&#123;</div><div class="line">                    <span class="keyword">return</span> <span class="string">""</span>;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> String <span class="title">makeBody</span><span class="params">(List&lt;INotification&gt; notificationList)</span> </span>&#123;</div><div class="line">                    <span class="keyword">return</span> <span class="string">""</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/spring-bean-wiring/" rel="tag">#spring bean wiring</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/07/08/ruby/Ruby-Ruby-blocks-and-yield-statement/" rel="next" title="Ruby - Ruby blocks and yield statement">
                <i class="fa fa-chevron-left"></i> Ruby - Ruby blocks and yield statement
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/07/10/ruby/Ruby-Understanding-class-eval-and-instance-eval/" rel="prev" title="Ruby - Understanding class_eval and instance_eval">
                Ruby - Understanding class_eval and instance_eval <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/avatar/avatar.jpg"
               alt="Bowen" />
          <p class="site-author-name" itemprop="name">Bowen</p>
          <p class="site-description motion-element" itemprop="description">keep learning - learning notes and blogs</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">102</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">46</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">249</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-Bean-Annotation"><span class="nav-number">1.</span> <span class="nav-text">Spring Bean Annotation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring’s-configuration-options"><span class="nav-number">2.</span> <span class="nav-text">Spring’s configuration options</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Automatically-wiring-beans"><span class="nav-number">3.</span> <span class="nav-text">1. Automatically wiring beans</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-Component-Creating-discoverable-beans"><span class="nav-number">3.1.</span> <span class="nav-text">1.1 @Component - Creating discoverable beans</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-Naming-a-component-scanned-bean"><span class="nav-number">3.2.</span> <span class="nav-text">1.2 Naming a component-scanned bean</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Approach-1"><span class="nav-number">3.2.1.</span> <span class="nav-text">Approach 1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Approach-2"><span class="nav-number">3.2.2.</span> <span class="nav-text">Approach 2</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-ComponentScan-Automatic-component-scan-amp-Setting-a-base-package-for-component-scanning"><span class="nav-number">3.3.</span> <span class="nav-text">1.3 @ComponentScan - Automatic component scan & Setting a base package for component scanning</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Style-1"><span class="nav-number">3.3.1.</span> <span class="nav-text">Style 1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Style-2-use-basePackages-attribute"><span class="nav-number">3.3.2.</span> <span class="nav-text">Style 2 - use basePackages attribute</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Style-3-Specify-classes-or-interfaces-with-basePackageClasses"><span class="nav-number">3.3.3.</span> <span class="nav-text">Style 3 - Specify classes or interfaces with basePackageClasses</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-Autowired-Annotating-beans-to-be-automatically-wired"><span class="nav-number">3.4.</span> <span class="nav-text">1.4 @Autowired - Annotating beans to be automatically wired</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5-Verifying-automatic-configuration"><span class="nav-number">3.5.</span> <span class="nav-text">1.5 Verifying automatic configuration</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Wiring-beans-with-JavaConfig"><span class="nav-number">4.</span> <span class="nav-text">2. Wiring beans with JavaConfig</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-Creating-a-configuration-class-with-Configuration-and-Bean"><span class="nav-number">4.1.</span> <span class="nav-text">2.1 Creating a configuration class with @Configuration and @Bean</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#An-Example-to-close-this-tutorial-Bean-Autowiring-and-Factory-Pattern"><span class="nav-number">5.</span> <span class="nav-text">An Example to close this tutorial - Bean Autowiring and Factory Pattern</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bowen</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'bowensgithubblog';
      var disqus_identifier = '2016/07/09/spring/Spring-Wiring-Beans/';
      var disqus_title = "Spring - Wiring Beans";
      var disqus_url = 'https://phoenixjiangnan.github.io/2016/07/09/spring/Spring-Wiring-Beans/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  




  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

</body>
</html>
